import{r as n,j as e,c as dt,R as ut}from"./index-BfPSHq6t.js";const Be=n.createContext(void 0);function mt({children:a}){const[s,o]=n.useState("info");return e.jsx(Be.Provider,{value:{activeTab:s,setActiveTab:o},children:e.jsxs("div",{children:[e.jsxs("div",{className:"tabs",children:[e.jsx("button",{className:`tab-button ${s==="info"?"active":""}`,onClick:()=>o("info"),children:"Info"}),e.jsx("button",{className:`tab-button ${s==="operational"?"active":""}`,onClick:()=>o("operational"),children:"Operational Forecast"}),e.jsx("button",{className:`tab-button ${s==="lbo_entry"?"active":""}`,onClick:()=>o("lbo_entry"),children:"LBO Entry"}),e.jsx("button",{className:`tab-button ${s==="exit"?"active":""}`,onClick:()=>o("exit"),children:"Exit"})]}),a]})})}function bt(){const a=n.useContext(Be);if(!a)throw new Error("TabContent must be used within Tabs");return a}function xe({tab:a,children:s}){const{activeTab:o}=bt();return o!==a?null:e.jsx("div",{id:`${a}-tab`,className:"tab-content active",children:s})}const ht=6,Oe=4,ke=12,Le=.1,xt=6,Ve=2006,pt=1e4,yt=4e3,vt=7.5,jt=9,Nt=2,ft=3,gt=25,Et=50,Mt=20,St=80,Dt=1,qe=n.createContext(void 0);function Rt({children:a}){const[s,o]=n.useState(pt.toString()),[c,y]=n.useState(yt.toString()),[x,v]=n.useState(vt.toString()),[S,E]=n.useState(jt.toString()),[f,g]=n.useState(gt.toString()),[D,h]=n.useState(ht.toString()),[T,i]=n.useState(xt.toString()),[d,R]=n.useState(Ve.toString());return e.jsx(qe.Provider,{value:{seniorDebt:s,setSeniorDebt:o,subordinatedDebt:c,setSubordinatedDebt:y,seniorDebtInterestRate:x,setSeniorDebtInterestRate:v,subordinatedDebtInterestRate:S,setSubordinatedDebtInterestRate:E,taxRate:f,setTaxRate:g,entryMultiple:D,setEntryMultiple:h,exitMultiple:T,setExitMultiple:i,selectedExitYear:d,setSelectedExitYear:R},children:a})}function ve(){const a=n.useContext(qe);if(!a)throw new Error("useLBOAssumptions must be used within an LBOAssumptionsProvider");return a}const Re=a=>({startingBalance:a==null?void 0:a.startingBalance,interest:a==null?void 0:a.interest,repayment:a==null?void 0:a.repayment,endingBalance:a==null?void 0:a.endingBalance});function Ct(a){const s=B=>{const P=B.filter(l=>l!==void 0);if(P.length)return P.reduce((l,m)=>l+m,0)},o=s([a.amountsReceivableOnContracts,a.tradeDebtors,a.otherDebtorsAndPrepayments]),c=a.cashAtBankAndInHandOperating,y=a.currentAssets!==void 0?a.currentAssets:s([o,c]),x=a.accountsPayable??a.tradeCreditors,v=a.currentLiabilities!==void 0?a.currentLiabilities:s([x,a.corporationTax,a.otherTaxationAndSocialSecurity,a.otherCreditorsAndAccruals,a.accruedDividendsAndInterest]),S=y!==void 0&&v!==void 0?y-v:void 0,E=S!==void 0&&a.turnover!==0?S/a.turnover*100:void 0,f=a.turnover+a.costOfSales,g=a.turnover!==0?f/a.turnover*100:0,D=f+a.overheads,h=a.turnover!==0?D/a.turnover*100:0,T=D+(a.depreciation||0),i=D+a.interestReceivable,d=a.turnover!==0?i/a.turnover*100:0,R=(a.increaseDecreaseInDebtors||0)+(a.increaseDecreaseInCreditors||0),F=D+(a.depreciation||0)+R,C=(D||0)+(a.depreciation||0)-R-(a.netCapitalExpenditure||0);return{...a,primaryDebt:Re(a.primaryDebt),secondaryDebt:Re(a.secondaryDebt),accountsReceivables:o,accountsPayable:x,currentAssets:y,currentLiabilities:v,netWorkingCapital:S,netWorkingCapitalToTurnover:E,grossProfit:f,grossProfitMargin:g,ebit:D,ebitMargin:h,ebitda:T,pbt:i,pbtMargin:d,cashFlowFromOperations:F,freeCashFlowPreTax:C}}function At(a){return{title:a.title,years:a.years.map(Ct)}}const Tt={title:"Profit and Loss",years:[{year:1999,status:"Audited",turnover:85067,costOfSales:-78495,overheads:-4293,interestReceivable:130,depreciation:164,increaseDecreaseInDebtors:-9972,increaseDecreaseInCreditors:7150,interestReceived:130,netCapitalExpenditure:-234},{year:2e3,status:"Audited",turnover:96266,costOfSales:-88778,overheads:-4990,interestReceivable:205,depreciation:249,increaseDecreaseInDebtors:3679,increaseDecreaseInCreditors:-2888,interestReceived:205,netCapitalExpenditure:-359},{year:2001,status:"Audited",turnover:115228,costOfSales:-106125,overheads:-6174,interestReceivable:354,depreciation:363,profitLossOnSaleOfFixedAssets:5,increaseDecreaseInDebtors:518,increaseDecreaseInCreditors:4711,interestReceived:354,netCapitalExpenditure:-752},{year:2002,status:"Audited",turnover:123006,costOfSales:-113105,overheads:-6675,interestReceivable:303,depreciation:291,profitLossOnSaleOfFixedAssets:-18,increaseDecreaseInDebtors:-4154,increaseDecreaseInCreditors:2960,interestReceived:303,netCapitalExpenditure:-408,amountsReceivableOnContracts:10244,tradeDebtors:7520,otherDebtorsAndPrepayments:1682,cashAtBankAndInHandOperating:6590,tradeCreditors:21286,corporationTax:334,otherTaxationAndSocialSecurity:352,otherCreditorsAndAccruals:885,accruedDividendsAndInterest:325},{year:2003,status:"Unaudited",turnover:132902,costOfSales:-121871,overheads:-7222,interestReceivable:239,depreciation:408,profitLossOnSaleOfFixedAssets:4,increaseDecreaseInDebtors:-1960,increaseDecreaseInCreditors:4606,interestReceived:239,netCapitalExpenditure:-310,amountsReceivableOnContracts:6035,tradeDebtors:14647,otherDebtorsAndPrepayments:581,cashAtBankAndInHandOperating:4286,tradeCreditors:24925,corporationTax:523,otherTaxationAndSocialSecurity:450,otherCreditorsAndAccruals:1754,accruedDividendsAndInterest:246},{year:2004,status:"Plan",turnover:145e3,costOfSales:-132675,overheads:-7795,interestReceivable:225,depreciation:433,increaseDecreaseInDebtors:1088,increaseDecreaseInCreditors:56,interestReceived:225,netCapitalExpenditure:-633,cashAtBankAndInHandOperating:4286},{year:2005,status:"Forecast",turnover:16e4,costOfSales:-146240,overheads:-8410,interestReceivable:250,depreciation:433,increaseDecreaseInDebtors:-2240,increaseDecreaseInCreditors:2602,interestReceived:250,netCapitalExpenditure:-500,cashAtBankAndInHandOperating:4286},{year:2006,status:"Forecast",turnover:172500,costOfSales:-157405,overheads:-9025,interestReceivable:275,depreciation:433,increaseDecreaseInDebtors:-1870,increaseDecreaseInCreditors:2141,interestReceived:275,netCapitalExpenditure:-564,cashAtBankAndInHandOperating:4286}]},Ce=At(Tt),Me=2004,It=5,_e=12,wt=_e-It,$e=a=>a<Me?0:a===Me?wt/_e:1,Ft=0,ce=a=>{const s=parseFloat(a);return Number.isNaN(s)?void 0:s},Ae=(a,s,o=1)=>{const c=a,y=Ft,x=c===void 0?void 0:c-y,v=c!==void 0&&x!==void 0?(c+x)/2:void 0,S=v!==void 0&&s!==void 0?s/100*v*o:void 0;return{startingBalance:c,interest:S,repayment:y,endingBalance:x}},Pt=a=>{var x,v;const s=a.depreciation??0,o=((x=a.primaryDebt)==null?void 0:x.interest)??0,c=((v=a.secondaryDebt)==null?void 0:v.interest)??0;return(a.ebitda??0)-s-a.interestReceivable-o-c};function je(){const{seniorDebt:a,seniorDebtInterestRate:s,subordinatedDebt:o,subordinatedDebtInterestRate:c,taxRate:y}=ve();return n.useMemo(()=>{const x=ce(a),v=ce(s),S=ce(o),E=ce(c),g=ce(y)??0;let D=x,h=S;const T=Ce.years.map(i=>{let d=i.primaryDebt,R=i.secondaryDebt;if(i.year>=Me){const m=$e(i.year);(D!==void 0||v!==void 0)&&(d=Ae(D,v,m)),(h!==void 0||E!==void 0)&&(R=Ae(h,E,m)),D=d==null?void 0:d.endingBalance,h=R==null?void 0:R.endingBalance}const F={...i,primaryDebt:d,secondaryDebt:R},C=Pt(F),B=F.turnover!==0?C/F.turnover*100:0,P=C*g/100,l=C-P;return{...F,pbt:C,pbtMargin:B,taxExpense:P,netIncome:l}});return{...Ce,years:T}},[a,s,o,c,y])}const ne=2004,Bt=7/12,He=ne-1,Ot=2004,We=a=>(a.increaseDecreaseInDebtors??0)+(a.increaseDecreaseInCreditors??0),Ue=a=>a.changeInOtherLongTermLiabilities??0,Ge=a=>{const s=a.ebitda??0,o=a.taxExpense??0,c=We(a),y=Ue(a),x=a.netCapitalExpenditure??0;return s-o-c-y-x},pe=(a,s,o,c)=>o<=0?0:(a+s)/2*(o/100)*c,kt=({baseCashFlow:a,seniorStartingBalance:s,subordinatedStartingBalance:o,seniorRatePercent:c,subordinatedRatePercent:y,interestAccrualFactor:x})=>{let v=0,S=0,E=s,f=o,g=pe(s,E,c,x),D=pe(o,f,y,x);const h=12;for(let i=0;i<h;i+=1){const d=Math.max(a-g-D,0),R=Math.min(d,s),F=Math.max(s-R,0),C=pe(s,F,c,x),B=Math.max(d-R,0),l=F===0?Math.min(B,o):0,m=Math.max(o-l,0),j=pe(o,m,y,x),I=Math.abs(C-g)<.01&&Math.abs(j-D)<.01&&Math.abs(R-v)<.01&&Math.abs(l-S)<.01;if(v=R,S=l,E=F,f=m,g=C,D=j,I)break}const T=Math.max(a-g-D,0);return{seniorRepayment:v,subordinatedRepayment:S,seniorEndingBalance:E,subordinatedEndingBalance:f,seniorInterestExpense:g,subordinatedInterestExpense:D,cashFlowAvailableForDebtRepayment:T}},ze=(a,s,o)=>{if(a.length===0)return[];let c,y;return a.map((x,v)=>{var C,B;const S=v===0?((C=x.primaryDebt)==null?void 0:C.startingBalance)??0:Math.max(c??0,0),E=v===0?((B=x.secondaryDebt)==null?void 0:B.startingBalance)??0:Math.max(y??0,0),f=Ge(x),g=$e(x.year),{seniorRepayment:D,subordinatedRepayment:h,seniorEndingBalance:T,subordinatedEndingBalance:i,seniorInterestExpense:d,subordinatedInterestExpense:R,cashFlowAvailableForDebtRepayment:F}=kt({baseCashFlow:f,seniorStartingBalance:S,subordinatedStartingBalance:E,seniorRatePercent:s,subordinatedRatePercent:o,interestAccrualFactor:g});return c=T,y=i,{year:x.year,cashFlowAvailableForDebtRepayment:F,senior:{startingBalance:S,interestExpense:d,repayment:D,endingBalance:T},subordinated:{startingBalance:E,interestExpense:R,repayment:h,endingBalance:i}}})},Xe=(a,s,o)=>{var S,E,f,g;if(!a)return;const c=s.get(a);if(c)return c.senior.endingBalance+c.subordinated.endingBalance;if(!o)return;const y=((S=o.primaryDebt)==null?void 0:S.endingBalance)??((E=o.primaryDebt)==null?void 0:E.startingBalance)??0,x=((f=o.secondaryDebt)==null?void 0:f.endingBalance)??((g=o.secondaryDebt)==null?void 0:g.startingBalance)??0,v=y+x;return v===0?void 0:v},Ke=(a,s)=>{if(!(a===void 0&&s===void 0))return(a??0)-(s??0)},Qe=a=>{if(!a)return;const s=a-ne;if(!(s<0))return Bt+s};function Lt(){const{entryMultiple:a,exitMultiple:s,selectedExitYear:o,seniorDebtInterestRate:c,subordinatedDebtInterestRate:y}=ve(),{years:x}=je(),v=u=>{const A=parseFloat(u);return Number.isNaN(A)?0:A},S=n.useMemo(()=>x.find(u=>u.year===ne),[x]),E=n.useMemo(()=>x.find(u=>u.year===He),[x]),f=S==null?void 0:S.ebitda,g=E==null?void 0:E.cashAtBankAndInHandOperating,D=n.useMemo(()=>{const u=parseInt(o,10);return Number.isNaN(u)?void 0:u},[o]),h=n.useMemo(()=>x.find(u=>u.year===D),[x,D]),T=h==null?void 0:h.ebitda,i=h==null?void 0:h.cashAtBankAndInHandOperating,d=n.useMemo(()=>{const u=parseFloat(a);return Number.isNaN(u)?void 0:u},[a]),R=n.useMemo(()=>{const u=parseFloat(s);return Number.isNaN(u)?void 0:u},[s]),F=n.useMemo(()=>{const u=D??ne;return x.filter(A=>A.year>=ne&&A.year<=u)},[x,D]),C=n.useMemo(()=>{const u=v(c),A=v(y);return ze(F,u,A)},[F,c,y]),B=n.useMemo(()=>{const u=new Map;return C.forEach(A=>u.set(A.year,A)),u},[C]),P=n.useMemo(()=>Xe(D,B,h),[D,B,h]),l=n.useMemo(()=>Ke(i,P),[i,P]),m=n.useMemo(()=>{if(!(f===void 0||d===void 0))return f*d},[f,d]),j=n.useMemo(()=>{if(!(T===void 0||R===void 0))return T*R},[T,R]),I=n.useMemo(()=>{if(!(m===void 0||g===void 0))return m+g},[m,g]),w=n.useMemo(()=>{if(!(j===void 0||l===void 0))return j+l},[j,l]),_=n.useMemo(()=>{if(!(I===void 0||w===void 0||I===0))return w/I},[I,w]),b=n.useMemo(()=>Qe(D),[D]),p=n.useMemo(()=>{if(!(_===void 0||b===void 0))return Math.pow(_,1/b)-1},[_,b]),N=u=>u===void 0?"—":u.toLocaleString("en-GB",{minimumFractionDigits:0,maximumFractionDigits:0}),z=u=>u===void 0?"—":`${u.toFixed(1)}x`,W=u=>u===void 0?"—":`${u.toFixed(2)}x`,J=u=>u===void 0?"—":`${(u*100).toFixed(1)}%`,Q=u=>u===void 0?"—":`${u.toFixed(1)} yrs`,Z=u=>{if(u===void 0||Number.isNaN(u))return[];const A=.25,H=6,$=[];for(let K=-H;K<=H;K+=1){const re=parseFloat((u+K*A).toFixed(2));re>0&&$.push(re)}return $},U=n.useMemo(()=>Z(d),[d]),k=n.useMemo(()=>Z(R),[R]),X=n.useMemo(()=>U.length===0||k.length===0||f===void 0||g===void 0||T===void 0||l===void 0||b===void 0||b<=0?[]:k.map(u=>{const A=T*u+l;return U.map(H=>{const $=f*H+g;if($<=0||A<=0)return;const K=A/$;if(!(K<=0))return Math.pow(K,1/b)-1})}),[U,k,f,g,T,l,b]),le=n.useMemo(()=>{const u=Math.max(...x.map(A=>A.ebitda??0),1);return x.map(A=>({year:A.year,value:A.ebitda??0,ratio:(A.ebitda??0)/u}))},[x]);return e.jsxs("div",{className:"info-dashboard",children:[e.jsxs("div",{className:"info-summary",children:[e.jsxs("div",{className:"info-summary-grid",children:[e.jsxs("div",{className:"info-summary-item",children:[e.jsx("span",{className:"info-label info-summary-label",children:"Company Name"}),e.jsx("span",{className:"info-value info-summary-value",children:"Styles & Wood Limited ('S&W')"})]}),e.jsxs("div",{className:"info-summary-item",children:[e.jsx("span",{className:"info-label info-summary-label",children:"Holding period"}),e.jsx("span",{className:"info-value info-summary-value",children:Q(b)})]}),e.jsxs("div",{className:"info-summary-item",children:[e.jsx("span",{className:"info-label info-summary-label",children:"Entry Date"}),e.jsx("span",{className:"info-value info-summary-value",children:"May 2004"})]}),e.jsxs("div",{className:"info-summary-item",children:[e.jsx("span",{className:"info-label info-summary-label",children:"Exit Date"}),e.jsx("span",{className:"info-value info-summary-value",children:D??"—"})]}),e.jsxs("div",{className:"info-summary-item",children:[e.jsx("span",{className:"info-label info-summary-label",children:"Entry multiple"}),e.jsx("span",{className:"info-value info-summary-value",children:z(d)})]}),e.jsxs("div",{className:"info-summary-item",children:[e.jsx("span",{className:"info-label info-summary-label",children:"Exit multiple"}),e.jsx("span",{className:"info-value info-summary-value",children:z(R)})]}),e.jsxs("div",{className:"info-summary-item",children:[e.jsx("span",{className:"info-label info-summary-label",children:"Enterprise value (entry)"}),e.jsx("span",{className:"info-value info-summary-value",children:N(m)})]}),e.jsxs("div",{className:"info-summary-item",children:[e.jsx("span",{className:"info-label info-summary-label",children:"Enterprise value (exit)"}),e.jsx("span",{className:"info-value info-summary-value",children:N(j)})]}),e.jsxs("div",{className:"info-summary-item",children:[e.jsx("span",{className:"info-label info-summary-label",children:"Equity value (entry)"}),e.jsx("span",{className:"info-value info-summary-value",children:N(I)})]}),e.jsxs("div",{className:"info-summary-item",children:[e.jsx("span",{className:"info-label info-summary-label",children:"Equity value (exit)"}),e.jsx("span",{className:"info-value info-summary-value",children:N(w)})]}),e.jsxs("div",{className:"info-summary-item",children:[e.jsx("span",{className:"info-label info-summary-label",children:"MOIC"}),e.jsx("span",{className:"info-value info-summary-value",children:W(_)})]}),e.jsxs("div",{className:"info-summary-item",children:[e.jsx("span",{className:"info-label info-summary-label",children:"IRR"}),e.jsx("span",{className:"info-value info-summary-value",children:J(p)})]})]}),e.jsxs("div",{className:"info-sensitivity-card",children:[e.jsx("h3",{className:"info-sensitivity-title",children:"IRR Sensitivity"}),X.length>0?e.jsx("div",{className:"info-sensitivity-table-wrapper",children:e.jsxs("table",{className:"info-sensitivity-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"exit-sensitivity-corner-cell",children:"Exit \\ Entry"}),U.map(u=>e.jsxs("th",{className:"exit-sensitivity-header-cell",children:[u.toFixed(2),"x"]},`info-entry-multiple-${u}`))]})}),e.jsx("tbody",{children:k.map((u,A)=>{var H;return e.jsxs("tr",{children:[e.jsxs("th",{className:"exit-sensitivity-header-cell",children:[u.toFixed(2),"x"]}),(H=X[A])==null?void 0:H.map(($,K)=>e.jsx("td",{className:"exit-sensitivity-cell",children:$===void 0?"—":J($)},`info-irr-cell-${u}-${U[K]}`))]},`info-exit-multiple-row-${u}`)})})]})}):e.jsx("p",{className:"info-sensitivity-empty",children:"Adjust exit assumptions to view sensitivity."})]})]}),e.jsxs("div",{className:"info-chart-card",children:[e.jsx("h3",{className:"info-chart-title",children:"EBITDA progression"}),e.jsx("div",{className:"info-ebitda-chart",children:le.map(u=>e.jsxs("div",{className:"info-chart-bar vertical",children:[e.jsx("div",{className:"info-chart-bar-track vertical",children:e.jsx("div",{className:"info-chart-bar-fill vertical",style:{height:`${Math.max(u.ratio*100,4)}%`}})}),e.jsx("span",{className:"info-chart-bar-label",children:u.year}),e.jsx("span",{className:"info-chart-bar-value",children:N(u.value)})]},u.year))})]})]})}function Vt(){return e.jsx(Lt,{})}function qt({years:a}){return e.jsxs("thead",{children:[e.jsxs("tr",{className:"accounting-year-data-header-row",children:[e.jsx("th",{className:"accounting-year-data-label-cell",children:"Years ending 31 December"}),a.map(s=>e.jsx("th",{className:"accounting-year-data-year-cell",children:s.year},s.year))]}),e.jsxs("tr",{className:"accounting-year-data-header-row",children:[e.jsx("th",{className:"accounting-year-data-label-cell"}),a.map(s=>e.jsx("th",{className:"accounting-year-data-unit-cell",children:"£000"},s.year))]}),e.jsxs("tr",{className:"accounting-year-data-header-row",children:[e.jsx("th",{className:"accounting-year-data-label-cell"}),a.map(s=>e.jsx("th",{className:"accounting-year-data-status-cell",children:s.status},s.year))]})]})}function V({label:a,years:s,getValue:o,isBold:c=!1,isDoubleUnderline:y=!1,isSingleUnderline:x=!1,formatValue:v,isSticky:S=!1,stickyOffset:E=0,isNested:f=!1,rowRef:g}){const h=v||(d=>d.toLocaleString("en-GB",{minimumFractionDigits:0,maximumFractionDigits:0})),T=["accounting-year-data-data-row",c?"accounting-year-data-bold":"",y?"accounting-year-data-double-underline":"",x?"accounting-year-data-single-underline":"",f?"accounting-year-data-nested-row":"",S?"accounting-year-data-sticky-row":""].filter(Boolean).join(" "),i=S?{top:E}:void 0;return e.jsxs("tr",{className:T,style:i,ref:g,children:[e.jsx("td",{className:`accounting-year-data-label-cell ${f?"accounting-year-data-nested-label":""}`,children:a}),s.map(d=>{const R=o(d);return e.jsx("td",{className:"accounting-year-data-value-cell",children:R!==void 0?h(R):""},d.year)})]})}function ge({label:a,years:s,getMargin:o}){const c=y=>`${y.toFixed(2)}%`;return e.jsxs("tr",{className:"accounting-year-data-margin-row",children:[e.jsx("td",{className:"accounting-year-data-label-cell",children:a}),s.map(y=>{const x=o(y);return e.jsx("td",{className:"accounting-year-data-margin-cell",children:x!==void 0?c(x):""},y.year)})]})}const Ee=1.5;function _t(){const{years:a}=je(),s=l=>m=>m[l],o=l=>l===void 0?"":l.toLocaleString("en-GB",{minimumFractionDigits:0,maximumFractionDigits:0}),c=n.useRef(null),y=n.useRef(null),[x,v]=n.useState(0),[S,E]=n.useState(0),[f,g]=n.useState({accountsReceivables:!1}),D=n.useMemo(()=>{const l={};return a.forEach(m=>{s("netWorkingCapitalToTurnover")(m)===void 0&&(l[m.year]=Ee.toString())}),l},[a]),[h,T]=n.useState(D),i=n.useMemo(()=>a.map(m=>{const j=h[m.year],I=j!==void 0?parseFloat(j):Ee,w=m.netWorkingCapital!==void 0?m.netWorkingCapital:Number.isNaN(I)?void 0:I/100*m.turnover;return{...m,netWorkingCapitalDerived:w}}).map((m,j,I)=>{let w;if(j===0)w=void 0;else{const p=I[j-1];m.netWorkingCapitalDerived===void 0||p.netWorkingCapitalDerived===void 0?w=void 0:w=m.netWorkingCapitalDerived-p.netWorkingCapitalDerived}const _=w??0,b=(m.ebit||0)+(m.depreciation||0)-_-(m.netCapitalExpenditure||0);return{...m,changeInWorkingCapitalDerived:w,freeCashFlowPreTaxDerived:b}}),[a,h]),d=n.useCallback(l=>{g(m=>({...m,[l]:!m[l]}))},[]),R=n.useCallback((l,m)=>{T(j=>({...j,[l]:m}))},[]),F=()=>e.jsxs("tr",{className:"accounting-year-data-data-row",children:[e.jsx("td",{className:"accounting-year-data-label-cell",children:"Net working capital / Turnover (%)"}),i.map(l=>{const m=s("netWorkingCapitalToTurnover")(l);if(m!==void 0)return e.jsx("td",{className:"accounting-year-data-value-cell",children:`${m.toFixed(2)}%`},l.year);const j=h[l.year]??Ee.toString();return e.jsx("td",{className:"accounting-year-data-value-cell",children:e.jsxs("label",{className:"nwc-assumption-field",children:[e.jsx("input",{type:"number",step:"0.1",min:"0",value:j,onChange:I=>R(l.year,I.target.value),className:"nwc-assumption-input","aria-label":`Assumed net working capital to turnover ratio for ${l.year}`}),e.jsx("span",{className:"nwc-assumption-suffix",children:"%"})]})},l.year)})]});n.useEffect(()=>{const l=()=>{const m=c.current;if(!m)return;const j=m.querySelector("thead tr");if(!j)return;const{height:I}=j.getBoundingClientRect();v(I)};return l(),window.addEventListener("resize",l),()=>{window.removeEventListener("resize",l)}},[a.length]),n.useLayoutEffect(()=>{const l=()=>{const m=y.current;if(!m)return;const{height:j}=m.getBoundingClientRect();E(I=>I===j?I:j)};return l(),window.addEventListener("resize",l),()=>{window.removeEventListener("resize",l)}},[i.length]);const C=(l,m)=>e.jsx("tr",{className:"accounting-year-data-section-row",children:e.jsx("td",{className:"accounting-year-data-section-cell",colSpan:i.length+1,children:l})}),B=(l,m)=>m?e.jsxs("tr",{className:"accounting-year-data-subsection-row",children:[e.jsx("td",{className:"accounting-year-data-subsection-cell",children:l}),i.map(j=>e.jsx("td",{className:"accounting-year-data-subsection-value-cell",children:o(m(j))},j.year))]}):e.jsx("tr",{className:"accounting-year-data-subsection-row",children:e.jsx("td",{className:"accounting-year-data-subsection-cell",colSpan:i.length+1,children:l})}),P=x+S;return e.jsxs("div",{className:"accounting-year-data-container",children:[e.jsx("h2",{className:"accounting-year-data-title",children:"Operational Forecast"}),e.jsxs("table",{className:"accounting-year-data-table",ref:c,children:[e.jsx(qt,{years:i}),e.jsxs("tbody",{children:[C("Income Statement"),e.jsx(V,{label:"Turnover",years:i,getValue:s("turnover"),isSticky:!0,stickyOffset:x,rowRef:y}),e.jsx(V,{label:"Cost of sales",years:i,getValue:s("costOfSales")}),e.jsx(V,{label:"Gross profit",years:i,getValue:s("grossProfit")}),e.jsx(V,{label:"Overheads",years:i,getValue:s("overheads")}),e.jsx(V,{label:"EBITDA",years:i,getValue:s("ebitda"),isBold:!0,isSticky:!0,stickyOffset:P}),e.jsx(V,{label:"EBIT",years:i,getValue:s("ebit"),isBold:!0}),e.jsx(V,{label:"Interest receivable",years:i,getValue:s("interestReceivable")}),e.jsx(V,{label:"PBT",years:i,getValue:s("pbt"),isBold:!0,isDoubleUnderline:!0}),e.jsx(ge,{label:"Gross profit margin (%)",years:i,getMargin:s("grossProfitMargin")}),e.jsx(ge,{label:"EBIT margin (%)",years:i,getMargin:s("ebitMargin")}),e.jsx(ge,{label:"PBT margin (%)",years:i,getMargin:s("pbtMargin")}),C("Capital Movement"),B("Current assets",s("currentAssets")),e.jsxs("tr",{className:"accounting-year-data-aggregate-row",children:[e.jsxs("td",{className:"accounting-year-data-label-cell accounting-year-data-label-with-toggle",children:[e.jsx("span",{children:"Accounts receivables"}),e.jsx("button",{type:"button",className:"accounting-year-data-toggle",onClick:()=>d("accountsReceivables"),"aria-expanded":f.accountsReceivables,"aria-label":`${f.accountsReceivables?"Collapse":"Expand"} accounts receivables`,children:e.jsx("span",{className:"accounting-year-data-toggle-icon",children:f.accountsReceivables?"−":"+"})})]}),i.map(l=>e.jsx("td",{className:"accounting-year-data-value-cell",children:o(s("accountsReceivables")(l))},l.year))]}),f.accountsReceivables&&e.jsxs(e.Fragment,{children:[e.jsx(V,{label:"Amounts receivable on contracts",years:i,getValue:s("amountsReceivableOnContracts"),isNested:!0}),e.jsx(V,{label:"Trade debtors",years:i,getValue:s("tradeDebtors"),isNested:!0}),e.jsx(V,{label:"Other debtors and prepayments",years:i,getValue:s("otherDebtorsAndPrepayments"),isNested:!0})]}),e.jsx(V,{label:"Cash at bank and in hand (operating cash only)",years:i,getValue:s("cashAtBankAndInHandOperating")}),B("Current liabilities",s("currentLiabilities")),e.jsx(V,{label:"Account payable",years:i,getValue:s("accountsPayable")}),e.jsx(V,{label:"Corporation tax",years:i,getValue:s("corporationTax")}),e.jsx(V,{label:"Other taxation and social security",years:i,getValue:s("otherTaxationAndSocialSecurity")}),e.jsx(V,{label:"Other creditors and accruals",years:i,getValue:s("otherCreditorsAndAccruals")}),e.jsx(V,{label:"Accrued dividends and interest",years:i,getValue:s("accruedDividendsAndInterest")}),B("Net working capital",l=>l.netWorkingCapitalDerived),F(),C("Cash Flow"),e.jsx(V,{label:"EBIT",years:i,getValue:s("ebit")}),e.jsx(V,{label:"Depreciation",years:i,getValue:s("depreciation")}),e.jsxs("tr",{className:"accounting-year-data-aggregate-row",children:[e.jsx("td",{className:"accounting-year-data-label-cell",children:"Change in working capital"}),i.map(l=>e.jsx("td",{className:"accounting-year-data-value-cell",children:o(l.changeInWorkingCapitalDerived)},l.year))]}),e.jsx(V,{label:"Net capital expenditure",years:i,getValue:s("netCapitalExpenditure")}),e.jsx(V,{label:"Free cash flow (pre-tax)",years:i,getValue:l=>l.freeCashFlowPreTaxDerived,isBold:!0,isDoubleUnderline:!0})]})]}),e.jsxs("div",{className:"nwc-assumption-legend","aria-live":"polite",children:[e.jsx("span",{className:"nwc-assumption-legend-swatch","aria-hidden":"true"}),e.jsx("span",{children:"Blue border indicates editable assumed ratio"})]})]})}const $t=[{id:"3i",name:"3i Group",ownershipPercent:36.5,isManagement:!1,exitsFully:!0},{id:"g-quiligotti",name:"Gerard Quiligotti",ownershipPercent:37.465,isManagement:!0},{id:"astle",name:"Astle Holdings (Fawcett)",ownershipPercent:12.7,isManagement:!0},{id:"g-clark",name:"Graham Clark",ownershipPercent:4.445,isManagement:!0},{id:"m-raftery",name:"Martin Raftery",ownershipPercent:4.445,isManagement:!0},{id:"d-howarth",name:"David Howarth",ownershipPercent:4.445,isManagement:!0},{id:"employee-pool",name:"Employee Pool (authorised not issued)",ownershipPercent:5,isManagement:!0,lockedPostDealPercent:5}],ie={dateLabel:"Pre-2004 Secondary Buyout",ownershipPercentTotal:100,equitySponsorName:"Aberdeen"},Ht=a=>Math.min(Math.max(a,0),100),Te=(a,s)=>(s.ownershipPercent??0)-(a.ownershipPercent??0),ye=a=>a.id??a.name;function Wt({managementRolloverRate:a,equityPlug:s,equityValue:o,preDealShareholders:c,ownershipPercentTotal:y}){const x=parseFloat(a),v=Ht(Number.isNaN(x)?0:x);c.reduce((b,p)=>b+(p.ownershipPercent??0),0);const S=y,E=S>0,f=c.map(b=>{let p=b.equityValue??0;return b.equityValue===void 0&&o!==void 0&&E&&b.ownershipPercent!==void 0&&(p=b.ownershipPercent/S*o),{shareholder:b,derivedValue:p}});let g=f.reduce((b,p)=>b+p.derivedValue,0);g===0&&typeof o=="number"&&(g=o);const D=f.map(({shareholder:b,derivedValue:p})=>{const N=b.ownershipPercent,z=N!==void 0?N:g>0?p/g*100:void 0;return{id:ye(b),name:b.name,equityValue:p,ownershipPercent:z,isManagement:b.isManagement,exitsFully:b.exitsFully}}).sort(Te),h=s===void 0?void 0:Math.max(s,0),i=f.filter(b=>b.shareholder.lockedPostDealPercent!==void 0).reduce((b,p)=>b+(p.shareholder.lockedPostDealPercent??0),0),d=h===void 0?void 0:Math.min(i/100*h,h),R=f.filter(b=>!b.shareholder.exitsFully&&b.shareholder.lockedPostDealPercent===void 0),F=R.reduce((b,p)=>b+p.derivedValue,0),C=v/100*F,B=h===void 0?void 0:Math.max(h-(d??0),0),P=B===void 0?void 0:Math.min(C,F,B),l=h===void 0?void 0:Math.max(h-(P??0)-(d??0),0),m=new Map;P!==void 0&&R.forEach(b=>{const p=F>0?b.derivedValue/F*P:P/R.length||0;m.set(ye(b.shareholder),p)});const j=f.map(({shareholder:b})=>{if(b.exitsFully)return;const p=b.lockedPostDealPercent,N=p!==void 0&&h!==void 0?p/100*h:void 0,z=m.get(ye(b));let W;N!==void 0?W=N:z!==void 0?W=z:h===void 0?W=void 0:W=0;const J=p!==void 0?p:h&&h>0&&W!==void 0?W/h*100:void 0;return{id:ye(b),name:b.name,equityValue:W,ownershipPercent:J,isManagement:b.isManagement}}).filter(b=>b!==void 0),I=h===void 0?void 0:h-(l??0);j.push({id:"sponsor-equity",name:"Sponsor equity",equityValue:l,ownershipPercent:h&&h>0&&l!==void 0?l/h*100:void 0,isSponsor:!0}),j.sort(Te);const w=h&&h>0&&I!==void 0?I/h*100:void 0,_=h&&h>0&&l!==void 0?l/h*100:w!==void 0?Math.max(100-w,0):void 0;return{managementRolloverPercent:v,managementRolloverAmount:P,sponsorEquityAmount:l,managementPostDealOwnershipPct:w,sponsorPostDealOwnershipPct:_,preDealStructure:D,postDealStructure:j,totalPreDealEquityValue:g,totalRolledEquityAmount:I}}const Ie=["#4caf50","#2196f3","#ff9800","#8bc34a","#9c27b0","#f44336","#00bcd4","#673ab7","#cddc39","#ff5722"];function Se({data:a,width:s=300,height:o=300,emptyStateMessage:c="No data available to display.",minLabelPercentage:y=5}){const x=n.useRef(null),v=n.useMemo(()=>a.map((i,d)=>({label:i.label,value:typeof i.value=="number"&&i.value>0?i.value:0,color:i.color??Ie[d%Ie.length]})).filter(i=>i.value>0),[a]),S=n.useMemo(()=>v.reduce((i,d)=>i+d.value,0),[v]),E=n.useMemo(()=>v.map(i=>({...i,percentage:S>0?i.value/S*100:0})),[v,S]),f=()=>{if(typeof window<"u"){const i=window.innerWidth<=480,d=window.innerWidth<=768;if(i)return{width:Math.min(200,s),height:Math.min(200,o)};if(d)return{width:Math.min(250,s),height:Math.min(250,o)}}return{width:s,height:o}},[g,D]=n.useState(()=>f()),[h,T]=n.useState(()=>typeof window<"u"?window.innerWidth<=768:!1);return n.useEffect(()=>{if(typeof window>"u"){D(f());return}const i=()=>{D(f()),T(window.innerWidth<=768)};return i(),window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[s,o]),n.useEffect(()=>{const i=x.current;if(!i)return;const d=i.getContext("2d");if(!d)return;i.width=g.width,i.height=g.height;const{width:R,height:F}=i,C=R/2,B=F/2,P=Math.min(C,B)-20;if(d.clearRect(0,0,R,F),E.length===0)return;let l=-Math.PI/2;E.forEach(m=>{const j=m.percentage/100*2*Math.PI;if(d.beginPath(),d.moveTo(C,B),d.arc(C,B,P,l,l+j),d.closePath(),d.fillStyle=m.color,d.fill(),d.strokeStyle="#fff",d.lineWidth=2,d.stroke(),m.percentage>=y){const I=l+j/2,w=C+Math.cos(I)*(P*.7),_=B+Math.sin(I)*(P*.7);d.fillStyle="#fff";const b=R<=200?10:12;d.font=`bold ${b}px sans-serif`,d.textAlign="center",d.textBaseline="middle",d.fillText(`${m.percentage.toFixed(1)}%`,w,_)}l+=j})},[E,g,y]),E.length===0?e.jsx("div",{style:{width:"100%",textAlign:"center",color:"#6b7280",fontSize:"13px",fontStyle:"italic"},children:c}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"},children:[e.jsx("canvas",{ref:x,width:g.width,height:g.height,style:{maxWidth:"100%",height:"auto"}}),e.jsx("div",{style:{textAlign:"center",marginTop:"10px",width:"100%"},children:E.map((i,d)=>e.jsxs("div",{style:{display:h?"block":"inline-block",margin:h?"3px 0":"3px 10px"},children:[e.jsx("span",{style:{display:"inline-block",width:"16px",height:"16px",background:i.color,borderRadius:"3px",verticalAlign:"middle",marginRight:"6px"}}),e.jsxs("span",{style:{fontSize:h?"11px":"12px"},children:[i.label,": ",i.percentage.toFixed(1),"%"]})]},`${i.label}-${d}`))})]})}function Ut({data:a,width:s=300,height:o=300,sponsorLabel:c}){const y=c??"Sponsor equity",x=[{label:"Target cash acquired",value:a.targetCash??0,color:"#4caf50"},{label:"Senior debt",value:a.seniorDebt,color:"#2196f3"},{label:"Subordinated debt",value:a.subordinatedDebt,color:"#ff9800"},{label:"Management rollover",value:a.managementRollover,color:"#8bc34a"},{label:y,value:a.sponsorEquity,color:"#9c27b0"}];return e.jsx(Se,{data:x,width:s,height:o,emptyStateMessage:"Add at least one funding source to display the distribution."})}const we=a=>a.length?a.reduce((c,y)=>c+(y.ownershipPercent??0),0)>0?a.map(c=>({label:c.name,value:c.ownershipPercent??0})).filter(c=>c.value>0):a.reduce((c,y)=>c+(y.equityValue??0),0)>0?a.map(c=>({label:c.name,value:c.equityValue??0})).filter(c=>c.value>0):[]:[];function Gt(){const{years:a}=je(),{seniorDebt:s,setSeniorDebt:o,subordinatedDebt:c,setSubordinatedDebt:y,seniorDebtInterestRate:x,setSeniorDebtInterestRate:v,subordinatedDebtInterestRate:S,setSubordinatedDebtInterestRate:E,entryMultiple:f,setEntryMultiple:g,taxRate:D,setTaxRate:h}=ve(),[T,i]=n.useState(Nt.toString()),[d,R]=n.useState(ft.toString()),[F,C]=n.useState(Et.toString()),[B,P]=n.useState(!1),l=ie==null?void 0:ie.ownershipPercentTotal,m=ie==null?void 0:ie.equitySponsorName,j=n.useMemo(()=>{const r=parseFloat(f);return Number.isNaN(r)?void 0:r},[f]),I=n.useMemo(()=>{const r=parseFloat(F);return Number.isNaN(r)?void 0:r},[F]),w=n.useMemo(()=>{const r=a.find(ae=>ae.year===2004);return r==null?void 0:r.ebitda},[a]),_=n.useMemo(()=>{const r=a.find(ae=>ae.year===2003);return r==null?void 0:r.cashAtBankAndInHandOperating},[a]),b=n.useMemo(()=>{if(!(w===void 0||j===void 0))return w*j},[w,j]),p=n.useMemo(()=>{if(!(b===void 0||_===void 0))return b+_},[b,_]),N=0,z=n.useMemo(()=>{if(b===void 0)return 0;const r=parseFloat(d);return Number.isNaN(r)?0:r/100*b},[b,d]),W=n.useMemo(()=>{const r=parseFloat(s),ae=parseFloat(c),me=(Number.isNaN(r)?0:r)+(Number.isNaN(ae)?0:ae),be=parseFloat(T);return Number.isNaN(be)?0:be/100*me},[s,c,T]),J=n.useMemo(()=>{if(p!==void 0)return p+N+z+W},[p,N,z,W]),Q=n.useMemo(()=>{const r=parseFloat(s);return Number.isNaN(r)?0:r},[s]),Z=n.useMemo(()=>{const r=parseFloat(c);return Number.isNaN(r)?0:r},[c]),U=n.useMemo(()=>{if(J!==void 0)return J-Q-Z},[J,Q,Z]),{managementRolloverAmount:k,sponsorEquityAmount:X,managementPostDealOwnershipPct:le,sponsorPostDealOwnershipPct:u,preDealStructure:A,postDealStructure:H,totalPreDealEquityValue:$,totalRolledEquityAmount:K}=n.useMemo(()=>Wt({managementRolloverRate:F,equityPlug:U,equityValue:p,preDealShareholders:$t,ownershipPercentTotal:l}),[F,U,p,l]),re=n.useMemo(()=>{if(U===void 0)return;const r=K??k??0,ae=X??0;return Q+Z+r+ae},[U,Q,Z,K,k,X]),de=n.useMemo(()=>{if(!(w===void 0||w===0))return Q/w},[w,Q]),ue=n.useMemo(()=>{if(!(w===void 0||w===0))return(Q+Z)/w},[w,Q,Z]),L=r=>r===void 0?"":r.toLocaleString("en-GB",{minimumFractionDigits:0,maximumFractionDigits:0}),oe=r=>r===void 0?"-":`${r.toFixed(1)}x`,ee=r=>r===void 0?"-":`${r.toFixed(1)}%`,t=r=>{C(r)},M=A.length>0,O=n.useMemo(()=>new Map(H.map(r=>[r.id??r.name,r])),[H]),q=U!==void 0&&U>0,G=n.useMemo(()=>H.map(r=>r.isSponsor?{...r,name:m}:r),[H,m]),te=n.useMemo(()=>we(A),[A]),se=n.useMemo(()=>q?we(G):[],[G,q]),{managementCashPayment:Je,paymentTo3i:Ze,managementRolloverSplitValue:Ye}=n.useMemo(()=>{if(!M)return{managementCashPayment:0,paymentTo3i:0,managementRolloverSplitValue:0};const r=A.filter(Y=>Y.isManagement&&!Y.exitsFully),ae=r.reduce((Y,he)=>Y+(he.equityValue??0),0),me=r.reduce((Y,he)=>{var De;return Y+(((De=O.get(he.id??he.name))==null?void 0:De.equityValue)??0)},0),be=Math.max(ae-me,0),fe=A.find(Y=>(Y.id??Y.name).toLowerCase()==="3i"||Y.name.toLowerCase().includes("3i"))??A.find(Y=>Y.exitsFully),ct=(fe==null?void 0:fe.equityValue)??0;return{managementCashPayment:be,paymentTo3i:ct,managementRolloverSplitValue:me}},[M,A,O]),Ne=M&&p!==void 0,et=()=>{Ne&&P(r=>!r)},tt=r=>{g(r)},at=r=>{o(r)},st=r=>{y(r)},nt=r=>{v(r)},rt=r=>{E(r)},it=r=>{i(r)},lt=r=>{R(r)},ot=r=>{h(r)};return e.jsxs("div",{className:"lbo-entry-container",children:[e.jsx("h2",{className:"lbo-entry-title",children:"LBO Entry"}),e.jsx("div",{className:"lbo-entry-form",children:e.jsxs("div",{className:"lbo-entry-form-grid",children:[e.jsxs("div",{className:"lbo-entry-form-column",children:[e.jsxs("div",{className:"lbo-entry-row",children:[e.jsx("span",{className:"lbo-entry-label",children:"Transaction Date:"}),e.jsx("span",{className:"lbo-entry-value",children:"May 2004"})]}),e.jsxs("div",{className:"lbo-entry-row",children:[e.jsx("span",{className:"lbo-entry-label",children:"Entry EBITDA:"}),e.jsx("span",{className:"lbo-entry-value",children:L(w)})]}),e.jsxs("div",{className:"lbo-entry-row",children:[e.jsx("label",{className:"lbo-entry-label",htmlFor:"lbo-entry-multiple-slider",children:"Multiple:"}),e.jsxs("div",{className:"lbo-entry-slider-control",children:[e.jsx("input",{id:"lbo-entry-multiple-slider",type:"range",min:Oe,max:ke,step:Le,value:f,onChange:r=>tt(r.target.value),className:"lbo-entry-slider","aria-label":"Assumed multiple for enterprise value calculation"}),e.jsx("span",{className:"lbo-entry-slider-value",children:oe(j)})]})]}),e.jsxs("div",{className:"lbo-entry-row lbo-entry-row-calculated",children:[e.jsx("span",{className:"lbo-entry-label",children:"Enterprise Value (EV):"}),e.jsx("span",{className:"lbo-entry-value lbo-entry-value-calculated",children:L(b)})]}),e.jsxs("div",{className:"lbo-entry-row",children:[e.jsx("span",{className:"lbo-entry-label",children:"Net Cash (minus Debt):"}),e.jsx("span",{className:"lbo-entry-value lbo-entry-value-calculated",children:L(_)})]}),e.jsxs("div",{className:"lbo-entry-row lbo-entry-row-calculated",children:[e.jsx("span",{className:"lbo-entry-label",children:"Equity Value:"}),e.jsx("span",{className:"lbo-entry-value lbo-entry-value-calculated",children:L(p)})]})]}),e.jsxs("div",{className:"lbo-entry-form-column",children:[e.jsxs("div",{className:"lbo-entry-row",children:[e.jsx("span",{className:"lbo-entry-label",children:"Financing fees rate:"}),e.jsxs("label",{className:"lbo-entry-assumption-field",children:[e.jsx("input",{type:"number",step:"0.1",min:"0",value:T,onChange:r=>it(r.target.value),className:"lbo-entry-assumption-input","aria-label":"Financing fees rate assumption"}),e.jsx("span",{className:"lbo-entry-assumption-suffix",children:"%"})]})]}),e.jsxs("div",{className:"lbo-entry-row",children:[e.jsx("span",{className:"lbo-entry-label",children:"Advisory fee:"}),e.jsxs("label",{className:"lbo-entry-assumption-field",children:[e.jsx("input",{type:"number",step:"0.1",min:"0",value:d,onChange:r=>lt(r.target.value),className:"lbo-entry-assumption-input","aria-label":"Advisory fee rate assumption"}),e.jsx("span",{className:"lbo-entry-assumption-suffix",children:"%"})]})]}),e.jsxs("div",{className:"lbo-entry-row",children:[e.jsx("span",{className:"lbo-entry-label",children:"Tax rate assumption:"}),e.jsxs("label",{className:"lbo-entry-assumption-field",children:[e.jsx("input",{type:"number",step:"0.1",min:"0",value:D,onChange:r=>ot(r.target.value),className:"lbo-entry-assumption-input","aria-label":"Tax rate assumption"}),e.jsx("span",{className:"lbo-entry-assumption-suffix",children:"%"})]})]}),e.jsxs("div",{className:"lbo-entry-row",children:[e.jsxs("label",{className:"lbo-entry-label",htmlFor:"lbo-entry-management-rollover-slider",children:["Management rollover:",e.jsx("span",{className:"lbo-entry-assumption-legend",children:" (% of management proceeds)"})]}),e.jsxs("div",{className:"lbo-entry-slider-control",children:[e.jsx("input",{id:"lbo-entry-management-rollover-slider",type:"range",min:Mt,max:St,step:Dt,value:F,onChange:r=>t(r.target.value),className:"lbo-entry-slider","aria-label":"Management rollover percentage assumption"}),e.jsx("span",{className:"lbo-entry-slider-value",children:ee(I)})]})]})]})]})}),e.jsxs("div",{className:"lbo-entry-sources-uses",children:[e.jsx("h3",{className:"lbo-entry-sources-uses-title",children:"Sources and Uses of Funds"}),e.jsxs("div",{className:"lbo-entry-sources-uses-grid",children:[e.jsxs("div",{className:"lbo-entry-sources-uses-section",children:[e.jsx("h4",{className:"lbo-entry-sources-uses-section-title",children:"Uses of Funds"}),e.jsxs("table",{className:"lbo-entry-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"lbo-entry-table-header-label"}),e.jsx("th",{className:"lbo-entry-table-header-value",children:"Amount"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-entry-table-label lbo-entry-table-label-expandable",children:Ne?e.jsxs("button",{type:"button",className:"lbo-entry-expand-button",onClick:et,"aria-expanded":B,children:[e.jsx("span",{children:B?"−":"+"}),"Transaction equity value"]}):"Transaction equity value"}),e.jsx("td",{className:"lbo-entry-table-value",children:L(p)})]}),Ne&&B&&e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"lbo-entry-table-subrow",children:[e.jsx("td",{className:"lbo-entry-table-label",children:"Payment to management"}),e.jsx("td",{className:"lbo-entry-table-value",children:L(Je)})]}),e.jsxs("tr",{className:"lbo-entry-table-subrow",children:[e.jsx("td",{className:"lbo-entry-table-label",children:"Payment to 3i"}),e.jsx("td",{className:"lbo-entry-table-value",children:L(Ze)})]}),e.jsxs("tr",{className:"lbo-entry-table-subrow",children:[e.jsx("td",{className:"lbo-entry-table-label",children:"Management rollover"}),e.jsx("td",{className:"lbo-entry-table-value",children:L(Ye)})]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-entry-table-label",children:"Refinanced debt"}),e.jsx("td",{className:"lbo-entry-table-value",children:L(N)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-entry-table-label",children:"Advisory fees"}),e.jsx("td",{className:"lbo-entry-table-value",children:L(z)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-entry-table-label",children:"Financing fees"}),e.jsx("td",{className:"lbo-entry-table-value",children:L(W)})]}),e.jsxs("tr",{className:"lbo-entry-table-total",children:[e.jsx("td",{className:"lbo-entry-table-label",children:"Total uses of funds"}),e.jsx("td",{className:"lbo-entry-table-value",children:L(J)})]})]})]})]}),e.jsxs("div",{className:"lbo-entry-sources-uses-section",children:[e.jsx("h4",{className:"lbo-entry-sources-uses-section-title",children:"Sources of Funds"}),e.jsxs("table",{className:"lbo-entry-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"lbo-entry-table-header-label"}),e.jsx("th",{className:"lbo-entry-table-header-value",children:"Amount"}),e.jsx("th",{className:"lbo-entry-table-header-value",children:"Int Rate"}),e.jsx("th",{className:"lbo-entry-table-header-value",children:"Cum Debt Mult"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-entry-table-label",children:"Senior debt (incl RCF)"}),e.jsx("td",{className:"lbo-entry-table-value",children:e.jsx("label",{className:"lbo-entry-assumption-field",children:e.jsx("input",{type:"number",step:"100",min:"0",value:s,onChange:r=>at(r.target.value),className:"lbo-entry-assumption-input lbo-entry-table-input","aria-label":"Senior debt amount"})})}),e.jsx("td",{className:"lbo-entry-table-value",children:e.jsxs("label",{className:"lbo-entry-assumption-field",children:[e.jsx("input",{type:"number",step:"0.1",min:"0",value:x,onChange:r=>nt(r.target.value),className:"lbo-entry-assumption-input lbo-entry-table-input lbo-entry-table-rate-input","aria-label":"Senior debt interest rate"}),e.jsx("span",{className:"lbo-entry-assumption-suffix",children:"%"})]})}),e.jsx("td",{className:"lbo-entry-table-value",children:oe(de)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-entry-table-label",children:"Subordinated debt"}),e.jsx("td",{className:"lbo-entry-table-value",children:e.jsx("label",{className:"lbo-entry-assumption-field",children:e.jsx("input",{type:"number",step:"100",min:"0",value:c,onChange:r=>st(r.target.value),className:"lbo-entry-assumption-input lbo-entry-table-input","aria-label":"Subordinated debt amount"})})}),e.jsx("td",{className:"lbo-entry-table-value",children:e.jsxs("label",{className:"lbo-entry-assumption-field",children:[e.jsx("input",{type:"number",step:"0.1",min:"0",value:S,onChange:r=>rt(r.target.value),className:"lbo-entry-assumption-input lbo-entry-table-input lbo-entry-table-rate-input","aria-label":"Subordinated debt interest rate"}),e.jsx("span",{className:"lbo-entry-assumption-suffix",children:"%"})]})}),e.jsx("td",{className:"lbo-entry-table-value",children:oe(ue)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-entry-table-label",children:"Management rollover"}),e.jsx("td",{className:"lbo-entry-table-value lbo-entry-table-calculated",children:L(K??k)}),e.jsx("td",{className:"lbo-entry-table-value",children:"-"}),e.jsx("td",{className:"lbo-entry-table-value",children:ee(le)})]}),e.jsxs("tr",{children:[e.jsxs("td",{className:"lbo-entry-table-label",children:[m," equity (plug)"]}),e.jsx("td",{className:"lbo-entry-table-value lbo-entry-table-calculated",children:L(X)}),e.jsx("td",{className:"lbo-entry-table-value",children:"-"}),e.jsx("td",{className:"lbo-entry-table-value",children:ee(u)})]}),e.jsxs("tr",{className:"lbo-entry-table-total",children:[e.jsx("td",{className:"lbo-entry-table-label",children:"Total sources of funds"}),e.jsx("td",{className:"lbo-entry-table-value",children:L(re)}),e.jsx("td",{className:"lbo-entry-table-value",children:"-"}),e.jsx("td",{className:"lbo-entry-table-value",children:"-"})]})]})]})]})]}),e.jsxs("div",{className:"lbo-entry-pie-chart-container",children:[e.jsx("h4",{className:"lbo-entry-pie-chart-title",children:"Sources of Funds Distribution"}),e.jsx(Ut,{data:{targetCash:void 0,seniorDebt:Q,subordinatedDebt:Z,managementRollover:K??k??0,sponsorEquity:X??0},sponsorLabel:m})]})]}),e.jsxs("div",{className:"lbo-entry-equity-structure",children:[e.jsx("h3",{className:"lbo-entry-equity-structure-title",children:"Equity Structure"}),e.jsxs("div",{className:"lbo-entry-equity-structure-grid",children:[e.jsxs("div",{className:"lbo-entry-equity-card",children:[e.jsx("h4",{className:"lbo-entry-equity-card-title",children:"Pre-deal equity structure"}),e.jsx("p",{className:"lbo-entry-equity-card-subtitle",children:ie.dateLabel}),e.jsxs("div",{className:"lbo-entry-equity-card-content",children:[e.jsx("div",{className:"lbo-entry-equity-card-table",children:e.jsxs("table",{className:"lbo-entry-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"lbo-entry-table-header-label"}),e.jsx("th",{className:"lbo-entry-table-header-value",children:"% ownership"}),e.jsx("th",{className:"lbo-entry-table-header-value",children:"Value"})]})}),e.jsxs("tbody",{children:[M?A.map(r=>e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-entry-table-label",children:r.name}),e.jsx("td",{className:"lbo-entry-table-value",children:ee(r.ownershipPercent)}),e.jsx("td",{className:"lbo-entry-table-value",children:L(r.equityValue)})]},r.id??r.name)):e.jsx("tr",{children:e.jsx("td",{className:"lbo-entry-table-label",colSpan:3,children:"Configure shareholder values to display the pre-deal structure."})}),e.jsxs("tr",{className:"lbo-entry-table-total",children:[e.jsx("td",{className:"lbo-entry-table-label",children:"Total"}),e.jsx("td",{className:"lbo-entry-table-value",children:M?ee(100):"-"}),e.jsx("td",{className:"lbo-entry-table-value",children:L($)})]})]})]})}),e.jsxs("div",{className:"lbo-entry-equity-card-chart",children:[e.jsx("h5",{className:"lbo-entry-equity-card-chart-title",children:"Ownership distribution"}),e.jsx(Se,{data:te,width:260,height:260,minLabelPercentage:3,emptyStateMessage:"Configure shareholder values to display the pre-deal distribution."})]})]})]}),e.jsxs("div",{className:"lbo-entry-equity-card",children:[e.jsx("h4",{className:"lbo-entry-equity-card-title",children:"Post-deal equity structure"}),e.jsxs("div",{className:"lbo-entry-equity-card-content",children:[e.jsx("div",{className:"lbo-entry-equity-card-table",children:e.jsxs("table",{className:"lbo-entry-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"lbo-entry-table-header-label"}),e.jsx("th",{className:"lbo-entry-table-header-value",children:"% ownership"}),e.jsx("th",{className:"lbo-entry-table-header-value",children:"Value"})]})}),e.jsxs("tbody",{children:[G.map(r=>e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-entry-table-label",children:r.name}),e.jsx("td",{className:"lbo-entry-table-value",children:q?ee(r.ownershipPercent):"-"}),e.jsx("td",{className:"lbo-entry-table-value",children:L(r.equityValue)})]},r.id??r.name)),e.jsxs("tr",{className:"lbo-entry-table-total",children:[e.jsx("td",{className:"lbo-entry-table-label",children:"Total"}),e.jsx("td",{className:"lbo-entry-table-value",children:q?ee(100):"-"}),e.jsx("td",{className:"lbo-entry-table-value",children:L(U)})]})]})]})}),e.jsxs("div",{className:"lbo-entry-equity-card-chart",children:[e.jsx("h5",{className:"lbo-entry-equity-card-chart-title",children:"Post-deal distribution"}),e.jsx(Se,{data:se,width:260,height:260,minLabelPercentage:3,emptyStateMessage:"Set deal inputs to calculate the post-deal distribution."})]})]})]})]})]})]})}const zt=.25,Fe=6,Pe=a=>{if(a===void 0||Number.isNaN(a))return[];const s=[];for(let o=-Fe;o<=Fe;o+=1){const c=parseFloat((a+o*zt).toFixed(2));c>0&&s.push(c)}return s};function Xt(){const{years:a}=je(),{seniorDebtInterestRate:s,subordinatedDebtInterestRate:o,entryMultiple:c,exitMultiple:y,setExitMultiple:x,selectedExitYear:v,setSelectedExitYear:S}=ve(),E=n.useMemo(()=>a.filter(t=>t.year>Ot),[a]);n.useEffect(()=>{var G,te;if(!E.length)return;const t=(G=E.find(se=>se.year===Ve))==null?void 0:G.year,M=(te=E[0])==null?void 0:te.year,O=t??M;if(!v){S(O?O.toString():"");return}E.some(se=>se.year.toString()===v)||S(O?O.toString():"")},[E,v,S]);const[f,g]=n.useState(!1),[D,h]=n.useState(!1),T=n.useMemo(()=>E.find(t=>t.year.toString()===v),[E,v]),i=n.useMemo(()=>{const t=parseInt(v,10);return Number.isNaN(t)?void 0:t},[v]),d=T==null?void 0:T.ebitda,R=T==null?void 0:T.cashAtBankAndInHandOperating,F=n.useMemo(()=>a.find(t=>t.year===ne),[a]),C=F==null?void 0:F.ebitda,B=n.useMemo(()=>a.find(t=>t.year===He),[a]),P=B==null?void 0:B.cashAtBankAndInHandOperating,l=n.useMemo(()=>{const t=parseFloat(y);return Number.isNaN(t)?void 0:t},[y]),m=n.useMemo(()=>{const t=parseFloat(c);return Number.isNaN(t)?void 0:t},[c]),j=n.useMemo(()=>Pe(m),[m]),I=n.useMemo(()=>Pe(l),[l]),w=n.useMemo(()=>{if(!(d===void 0||l===void 0))return d*l},[d,l]),_=n.useMemo(()=>{if(!(C===void 0||m===void 0))return C*m},[C,m]),b=n.useMemo(()=>{if(!(_===void 0||P===void 0))return _+P},[_,P]),p=n.useMemo(()=>{const t=i??ne;return a.filter(M=>M.year>=ne&&M.year<=t)},[a,i]),N=t=>t===void 0?"":t.toLocaleString("en-GB",{minimumFractionDigits:0,maximumFractionDigits:0}),z=t=>t===void 0?"-":`${t.toFixed(1)}x`,W=t=>t===void 0?"":`${t.toFixed(2)}x`,J=t=>t===void 0?"":`${(t*100).toFixed(1)}%`,Q=t=>t===void 0?"":`${t.toFixed(1)} yrs`,Z=t=>`${t}`,U=t=>{const M=parseFloat(t);return Number.isNaN(M)?0:M},k=n.useMemo(()=>{const t=U(s),M=U(o);return ze(p,t,M)},[p,s,o]),X=n.useMemo(()=>{const t=new Map;return k.forEach(M=>t.set(M.year,M)),t},[k]),le=n.useMemo(()=>Xe(i,X,T),[i,X,T]),u=n.useMemo(()=>Ke(R,le),[R,le]),A=n.useMemo(()=>{if(!(w===void 0||u===void 0))return w+u},[w,u]),H=n.useMemo(()=>{if(!(A===void 0||b===void 0||b===0))return A/b},[A,b]),$=n.useMemo(()=>Qe(i),[i]),K=n.useMemo(()=>{if(!(H===void 0||$===void 0))return Math.pow(H,1/$)-1},[H,$]),re=n.useMemo(()=>j.length===0||I.length===0||C===void 0||P===void 0||d===void 0||u===void 0||$===void 0||$<=0?[]:I.map(t=>{const M=d*t+u;return j.map(O=>{const q=C*O+P;if(q<=0||M<=0)return;const G=M/q;if(!(G<=0))return Math.pow(G,1/$)-1})}),[j,I,C,P,d,u,$]),de=n.useMemo(()=>j.length===0||I.length===0||C===void 0||P===void 0||d===void 0||u===void 0?[]:I.map(t=>{const M=d*t+u;return j.map(O=>{const q=C*O+P;if(!(q<=0||M<=0))return M/q})}),[j,I,C,P,d,u]),ue=m!==void 0?m.toFixed(2):void 0,L=l!==void 0?l.toFixed(2):void 0,oe=re.length>0,ee=de.length>0;return e.jsxs("div",{className:"lbo-entry-container",children:[e.jsx("h2",{className:"lbo-entry-title",children:"LBO Exit"}),e.jsx("div",{className:"lbo-entry-form",children:e.jsxs("div",{className:"lbo-entry-form-grid",children:[e.jsxs("div",{className:"lbo-entry-form-column exit-metrics-column",children:[e.jsxs("div",{className:"lbo-entry-row",children:[e.jsx("label",{className:"lbo-entry-label",htmlFor:"exit-transaction-date",children:"Transaction Date:"}),E.length>0?e.jsx("select",{id:"exit-transaction-date",className:"lbo-entry-select",value:v,onChange:t=>S(t.target.value),children:E.map(t=>e.jsx("option",{value:t.year.toString(),children:Z(t.year)},t.year))}):e.jsx("span",{className:"lbo-entry-value",children:"No exit years available"})]}),e.jsxs("div",{className:"lbo-entry-row",children:[e.jsx("span",{className:"lbo-entry-label",children:"Exit EBITDA:"}),e.jsx("span",{className:"lbo-entry-value",children:N(d)})]}),e.jsxs("div",{className:"lbo-entry-row",children:[e.jsx("label",{className:"lbo-entry-label",htmlFor:"exit-multiple-slider",children:"Multiple:"}),e.jsxs("div",{className:"lbo-entry-slider-control",children:[e.jsx("input",{id:"exit-multiple-slider",type:"range",min:Oe,max:ke,step:Le,value:y,onChange:t=>x(t.target.value),className:"lbo-entry-slider","aria-label":"Assumed exit multiple for enterprise value calculation"}),e.jsx("span",{className:"lbo-entry-slider-value",children:z(l)})]})]}),e.jsxs("div",{className:"lbo-entry-row lbo-entry-row-calculated",children:[e.jsx("span",{className:"lbo-entry-label",children:"Enterprise Value (EV):"}),e.jsx("span",{className:"lbo-entry-value lbo-entry-value-calculated",children:N(w)})]}),e.jsxs("div",{className:"lbo-entry-row",children:[e.jsx("span",{className:"lbo-entry-label",children:"Net Cash (minus Debt):"}),e.jsx("span",{className:"lbo-entry-value lbo-entry-value-calculated",children:N(u)})]}),e.jsxs("div",{className:"lbo-entry-row lbo-entry-row-calculated",children:[e.jsx("span",{className:"lbo-entry-label",children:"Equity Value:"}),e.jsx("span",{className:"lbo-entry-value lbo-entry-value-calculated",children:N(A)})]})]}),e.jsxs("div",{className:"lbo-entry-form-column exit-comparison-column",children:[e.jsxs("div",{className:"lbo-entry-row lbo-entry-row-calculated",children:[e.jsx("span",{className:"lbo-entry-label",children:"Entry equity value:"}),e.jsx("span",{className:"lbo-entry-value lbo-entry-value-calculated",children:N(b)})]}),e.jsxs("div",{className:"lbo-entry-row",children:[e.jsx("span",{className:"lbo-entry-label",children:"Entry multiple:"}),e.jsx("span",{className:"lbo-entry-value",children:z(m)})]}),e.jsxs("div",{className:"lbo-entry-row lbo-entry-row-calculated",children:[e.jsx("span",{className:"lbo-entry-label",children:"Exit equity value:"}),e.jsx("span",{className:"lbo-entry-value lbo-entry-value-calculated",children:N(A)})]}),e.jsxs("div",{className:"lbo-entry-row",children:[e.jsx("span",{className:"lbo-entry-label",children:"Exit multiple:"}),e.jsx("span",{className:"lbo-entry-value",children:z(l)})]}),e.jsxs("div",{className:"lbo-entry-row",children:[e.jsx("span",{className:"lbo-entry-label",children:"Holding period:"}),e.jsx("span",{className:"lbo-entry-value",children:Q($)})]}),e.jsxs("div",{className:"lbo-entry-row lbo-entry-row-calculated",children:[e.jsx("span",{className:"lbo-entry-label",children:"MOIC:"}),e.jsx("span",{className:"lbo-entry-value lbo-entry-value-calculated",children:W(H)}),ee&&e.jsx("button",{type:"button",className:"exit-sensitivity-link",onClick:()=>h(!0),"aria-label":"Open MOIC sensitivity matrix",children:"Sensitivity"})]}),e.jsxs("div",{className:"lbo-entry-row lbo-entry-row-calculated exit-irr-row",children:[e.jsx("span",{className:"lbo-entry-label",children:"IRR:"}),e.jsx("span",{className:"lbo-entry-value lbo-entry-value-calculated",children:J(K)}),oe&&e.jsx("button",{type:"button",className:"exit-sensitivity-link",onClick:()=>g(!0),"aria-label":"Open IRR sensitivity matrix",children:"Sensitivity"})]})]})]})}),D&&ee&&e.jsx("div",{className:"exit-sensitivity-overlay",role:"dialog","aria-modal":"true","aria-label":"MOIC sensitivity table",onClick:()=>h(!1),children:e.jsxs("div",{className:"exit-sensitivity-overlay-content",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"exit-sensitivity-overlay-header",children:[e.jsx("h3",{className:"exit-sensitivity-title",children:"MOIC Sensitivity (Entry vs Exit Multiple)"}),e.jsx("button",{type:"button",className:"exit-sensitivity-close",onClick:()=>h(!1),"aria-label":"Close sensitivity table",children:"×"})]}),e.jsx("div",{className:"exit-sensitivity-table-wrapper",children:e.jsxs("table",{className:"exit-sensitivity-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"exit-sensitivity-corner-cell",children:"Exit \\ Entry"}),j.map(t=>e.jsxs("th",{className:"exit-sensitivity-header-cell",children:[t.toFixed(2),"x"]},`moic-entry-multiple-${t}`))]})}),e.jsx("tbody",{children:I.map((t,M)=>{var O;return e.jsxs("tr",{children:[e.jsxs("th",{className:"exit-sensitivity-header-cell",children:[t.toFixed(2),"x"]}),(O=de[M])==null?void 0:O.map((q,G)=>{const te=j[G],se=ue===te.toFixed(2)&&L===t.toFixed(2);return e.jsx("td",{className:`exit-sensitivity-cell${se?" exit-sensitivity-cell-selected":""}`,children:q===void 0?"—":W(q)},`moic-cell-${t}-${te}`)})]},`moic-exit-multiple-row-${t}`)})})]})})]})}),f&&oe&&e.jsx("div",{className:"exit-sensitivity-overlay",role:"dialog","aria-modal":"true","aria-label":"IRR sensitivity table",onClick:()=>g(!1),children:e.jsxs("div",{className:"exit-sensitivity-overlay-content",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"exit-sensitivity-overlay-header",children:[e.jsx("h3",{className:"exit-sensitivity-title",children:"IRR Sensitivity (Entry vs Exit Multiple)"}),e.jsx("button",{type:"button",className:"exit-sensitivity-close",onClick:()=>g(!1),"aria-label":"Close sensitivity table",children:"×"})]}),e.jsx("div",{className:"exit-sensitivity-table-wrapper",children:e.jsxs("table",{className:"exit-sensitivity-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"exit-sensitivity-corner-cell",children:"Exit \\ Entry"}),j.map(t=>e.jsxs("th",{className:"exit-sensitivity-header-cell",children:[t.toFixed(2),"x"]},`irr-entry-multiple-${t}`))]})}),e.jsx("tbody",{children:I.map((t,M)=>{var O;return e.jsxs("tr",{children:[e.jsxs("th",{className:"exit-sensitivity-header-cell",children:[t.toFixed(2),"x"]}),(O=re[M])==null?void 0:O.map((q,G)=>{const te=j[G],se=ue===te.toFixed(2)&&L===t.toFixed(2);return e.jsx("td",{className:`exit-sensitivity-cell${se?" exit-sensitivity-cell-selected":""}`,children:q===void 0?"—":J(q)},`irr-cell-${t}-${te}`)})]},`irr-exit-multiple-row-${t}`)})})]})})]})}),e.jsxs("div",{className:"lbo-exit-performance-section",children:[e.jsx("h3",{className:"lbo-exit-performance-title",children:"Entry to Exit Performance"}),p.length>0?e.jsxs("table",{className:"lbo-exit-performance-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"lbo-exit-performance-header",children:"Metric"}),p.map(t=>e.jsx("th",{className:"lbo-exit-performance-header",children:t.year},t.year))]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"Sales"}),p.map(t=>e.jsx("td",{className:"lbo-exit-performance-value",children:N(t.turnover)},`sales-${t.year}`))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"EBITDA"}),p.map(t=>e.jsx("td",{className:"lbo-exit-performance-value",children:N(t.ebitda)},`ebitda-${t.year}`))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"Interest on primary debt"}),p.map(t=>{var M,O;return e.jsx("td",{className:"lbo-exit-performance-value",children:N(((M=X.get(t.year))==null?void 0:M.senior.interestExpense)??((O=t.primaryDebt)==null?void 0:O.interest))},`primary-interest-${t.year}`)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"Interest on secondary debt"}),p.map(t=>{var M,O;return e.jsx("td",{className:"lbo-exit-performance-value",children:N(((M=X.get(t.year))==null?void 0:M.subordinated.interestExpense)??((O=t.secondaryDebt)==null?void 0:O.interest))},`secondary-interest-${t.year}`)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"Profit before tax"}),p.map(t=>e.jsx("td",{className:"lbo-exit-performance-value",children:N(t.pbt)},`pbt-${t.year}`))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"Tax expense"}),p.map(t=>e.jsx("td",{className:"lbo-exit-performance-value",children:N(t.taxExpense)},`tax-${t.year}`))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"Net income"}),p.map(t=>e.jsx("td",{className:"lbo-exit-performance-value",children:N(t.netIncome)},`net-income-${t.year}`))]})]})]}):e.jsx("p",{className:"lbo-exit-performance-empty",children:"Set an exit year to view the performance snapshot."})]}),e.jsxs("div",{className:"lbo-exit-performance-section",children:[e.jsx("h3",{className:"lbo-exit-performance-title",children:"Cash Flow Estimation"}),p.length>0?e.jsxs("table",{className:"lbo-exit-performance-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"lbo-exit-performance-header",children:"Metric"}),p.map(t=>e.jsx("th",{className:"lbo-exit-performance-header",children:t.year},`cashflow-head-${t.year}`))]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"EBITDA"}),p.map(t=>e.jsx("td",{className:"lbo-exit-performance-value",children:N(t.ebitda)},`cf-ebitda-${t.year}`))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"Tax expense (cash taxes)"}),p.map(t=>e.jsx("td",{className:"lbo-exit-performance-value",children:N(t.taxExpense)},`cf-tax-${t.year}`))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"Changes in net working capital"}),p.map(t=>e.jsx("td",{className:"lbo-exit-performance-value",children:N(We(t))},`cf-nwc-${t.year}`))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"Change in other long-term liabilities"}),p.map(t=>e.jsx("td",{className:"lbo-exit-performance-value",children:N(Ue(t))},`cf-ltl-${t.year}`))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"Capex"}),p.map(t=>e.jsx("td",{className:"lbo-exit-performance-value",children:N(t.netCapitalExpenditure)},`cf-capex-${t.year}`))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"Interest on senior debt"}),p.map(t=>{var M,O;return e.jsx("td",{className:"lbo-exit-performance-value",children:N(((M=X.get(t.year))==null?void 0:M.senior.interestExpense)??((O=t.primaryDebt)==null?void 0:O.interest))},`cf-senior-${t.year}`)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"Interest on subordinated debt"}),p.map(t=>{var M,O;return e.jsx("td",{className:"lbo-exit-performance-value",children:N(((M=X.get(t.year))==null?void 0:M.subordinated.interestExpense)??((O=t.secondaryDebt)==null?void 0:O.interest))},`cf-sub-${t.year}`)})]}),e.jsxs("tr",{className:"lbo-exit-performance-row-total",children:[e.jsx("td",{className:"lbo-exit-performance-label lbo-exit-performance-label-strong",children:"Cash flow available for debt repayment"}),p.map(t=>{var q,G;const M=X.get(t.year),O=Math.max(Ge(t)-(((q=t.primaryDebt)==null?void 0:q.interest)??0)-(((G=t.secondaryDebt)==null?void 0:G.interest)??0),0);return e.jsx("td",{className:"lbo-exit-performance-value lbo-exit-performance-value-strong",children:N((M==null?void 0:M.cashFlowAvailableForDebtRepayment)??O)},`cf-available-${t.year}`)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"Repayment of senior debt"}),k.map(t=>e.jsx("td",{className:"lbo-exit-performance-value",children:N(t.senior.repayment)},`cf-senior-repayment-${t.year}`))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"Repayment of subordinated debt"}),k.map(t=>e.jsx("td",{className:"lbo-exit-performance-value",children:N(t.subordinated.repayment)},`cf-subordinated-repayment-${t.year}`))]})]})]}):e.jsx("p",{className:"lbo-exit-performance-empty",children:"Set an exit year to view the cash flow estimation."})]}),e.jsxs("div",{className:"lbo-exit-performance-section",children:[e.jsx("h3",{className:"lbo-exit-performance-title",children:"Debt schedule"}),p.length>0?e.jsxs("table",{className:"lbo-exit-performance-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"lbo-exit-performance-header",children:"Metric"}),k.map(t=>e.jsx("th",{className:"lbo-exit-performance-header",children:t.year},`debt-head-${t.year}`))]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"Senior debt - beginning balance"}),k.map(t=>e.jsx("td",{className:"lbo-exit-performance-value",children:N(t.senior.startingBalance)},`senior-begin-${t.year}`))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"Senior debt - interest expense"}),k.map(t=>e.jsx("td",{className:"lbo-exit-performance-value",children:N(t.senior.interestExpense)},`senior-interest-${t.year}`))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"Senior debt - repayment"}),k.map(t=>e.jsx("td",{className:"lbo-exit-performance-value",children:N(t.senior.repayment)},`senior-repayment-${t.year}`))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"Senior debt - ending balance"}),k.map(t=>e.jsx("td",{className:"lbo-exit-performance-value",children:N(t.senior.endingBalance)},`senior-ending-${t.year}`))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"Subordinated debt - beginning balance"}),k.map(t=>e.jsx("td",{className:"lbo-exit-performance-value",children:N(t.subordinated.startingBalance)},`sub-begin-${t.year}`))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"Subordinated debt - interest expense"}),k.map(t=>e.jsx("td",{className:"lbo-exit-performance-value",children:N(t.subordinated.interestExpense)},`sub-interest-${t.year}`))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"Subordinated debt - repayment"}),k.map(t=>e.jsx("td",{className:"lbo-exit-performance-value",children:N(t.subordinated.repayment)},`sub-repayment-${t.year}`))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"Subordinated debt - ending balance"}),k.map(t=>e.jsx("td",{className:"lbo-exit-performance-value",children:N(t.subordinated.endingBalance)},`sub-ending-${t.year}`))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label lbo-exit-performance-label-strong",children:"Total debt"}),k.map(t=>e.jsx("td",{className:"lbo-exit-performance-value lbo-exit-performance-value-strong",children:N(t.senior.endingBalance+t.subordinated.endingBalance)},`total-debt-${t.year}`))]})]})]}):e.jsx("p",{className:"lbo-exit-performance-empty",children:"Set an exit year to view the debt schedule."})]})]})}function Kt(){return e.jsx(Rt,{children:e.jsx("div",{className:"app",children:e.jsxs("div",{className:"container",children:[e.jsx("h1",{children:"Styles & Wood – Behind the Scenes of Retail"}),e.jsxs(mt,{children:[e.jsx(xe,{tab:"info",children:e.jsx(Vt,{})}),e.jsx(xe,{tab:"operational",children:e.jsx(_t,{})}),e.jsx(xe,{tab:"lbo_entry",children:e.jsx(Gt,{})}),e.jsx(xe,{tab:"exit",children:e.jsx(Xt,{})})]}),e.jsxs("div",{className:"case-reference",children:[e.jsx("p",{children:'Case Study: "Styles & Wood – Behind the Scenes of Retail"'}),e.jsx("p",{children:"Prepared by Alberto Pons, Kay Nemoto, Eli Talmor"}),e.jsxs("p",{children:[e.jsx("a",{href:"index.html",style:{color:"#000",textDecoration:"none",marginRight:"16px"},children:"← Back to Main"}),"Vibe-coded by ",e.jsx("a",{href:"https://www.linkedin.com/in/dima-malyshenko/",target:"_blank",rel:"noopener noreferrer",style:{color:"#000",textDecoration:"none"},children:"Dima Malyshenko"})]})]})]})})})}dt.createRoot(document.getElementById("root")).render(e.jsx(ut.StrictMode,{children:e.jsx(Kt,{})}));
