import{j as e,r as _,c as de,R as ue}from"./index-BfPSHq6t.js";const me={funds:[{name:"European Buyout (Main Fund)",target_fund_size_eur_millions:1e3,strategy:"Buyout deals across Europe",management_fees_percent:1.85,preferred_return_percent:8,manager_return_catch_up:"Yes (100%)",carried_interest_percent:20,fund_establishment_fee_percent_of_committed_capital:.2,fund_terms_years:"10 + 1 + 1",number_of_investments_targeted:"10-15",investment_period_years_from_initial_close:6,expected_gross_return_on_investments_multiple:3},{name:"European Buyout (Co-Investment Fund Vehicle)",target_fund_size_eur_millions:200,strategy:"Buyout deals across Europe (co-investing with main fund)",management_fees_percent:null,preferred_return_percent:null,manager_return_catch_up:null,carried_interest_percent:null,fund_establishment_fee_percent_of_committed_capital:null,fund_terms_years:"10 + 1 + 1",number_of_investments_targeted:"10-15",investment_period_years_from_initial_close:6,expected_gross_return_on_investments_multiple:3},{name:"European VC Fund",target_fund_size_eur_millions:100,strategy:"Venture deals across Europe",management_fees_percent:2,preferred_return_percent:8,manager_return_catch_up:"Yes (100%)",carried_interest_structure:{base_carried_interest_percent:20,base_threshold_net_multiple:2.75,higher_carried_interest_percent:25,higher_threshold_condition:"> 2.75x net return"},fund_establishment_fee_percent_of_committed_capital:.5,fund_terms_years:"10 + 1 + 1",number_of_investments_targeted:"~15",investment_period_years_from_initial_close:6,expected_gross_return_on_investments_multiple:5}]},he=Array.from({length:11},(t,a)=>a+5),pe={cashFlows:[0],netMultiple:0,netIrr:null,grossIrr:null,feeDrag:0,netValue:0,totalFees:0,grossMultiple:0,cashEvents:[]},_e=t=>{const a=t.match(/\d+/g);return a?a.map(Number).reduce((n,s)=>n+s,0):10},ae=t=>{let a=.1;const n=100,s=1e-7,r=d=>t.reduce((l,h,i)=>l+h/Math.pow(1+d,i),0);for(let d=0;d<n;d++){const l=r(a),h=t.reduce((M,x,f)=>M-f*x/Math.pow(1+a,f+1),0);if(Math.abs(h)<s)break;const i=a-l/h;if(Math.abs(i-a)<s)return i;a=i}return null},ee=({allocation:t,grossMultiple:a,exitYear:n,config:s})=>{if(t<=0)return{...pe,grossMultiple:a};const r=_e(s.fund_terms_years),d=Math.max(n,r),l=Array(d+1).fill(0),h=6,i=(s.fund_establishment_fee_percent_of_committed_capital??0)/100,M=(s.management_fees_percent??0)/100,x=(s.preferred_return_percent??0)/100,f=s.carried_interest_structure,B="carried_interest_percent"in s&&s.carried_interest_percent!==null?(s.carried_interest_percent??0)/100:f?f.base_carried_interest_percent/100:0,E=[];if(i>0){const c=t*i;l[0]-=c,E.push({label:"Establishment fees (Year 0)",amount:-c,percent:s.fund_establishment_fee_percent_of_committed_capital,year:0})}const v=t/h;for(let c=1;c<=h;c++)l[c]-=v,E.push({label:`Capital called (Year ${c})`,amount:-v,year:c});let j=0;if(M>0){const c=Math.min(n,r);for(let b=1;b<=c;b++){const O=t*M;l[b]-=O,j+=O,E.push({label:`Management fees (Year ${b})`,amount:-O,percent:s.management_fees_percent,year:b})}}const g=t,T=g*a,W=n,D=x>0?g*Math.pow(1+x,W)-g:0,P=Math.max(0,T-g);let w=B;f&&(w=a>f.base_threshold_net_multiple?f.higher_carried_interest_percent/100:f.base_carried_interest_percent/100);const F=P>D?(P-D)*w:0,I=T-F;if(F>0){const c=w*100;E.push({label:`Carry (Year ${n})`,amount:-F,percent:c,year:n})}n<l.length?l[n]+=I:l.push(I),E.push({label:`Distributions (Year ${n})`,amount:I,year:n});const U=l.reduce((c,b)=>b<0?c-b:c,0),C=l.reduce((c,b)=>b>0?c+b:c,0),Y=U===0?0:C/U,X=ae(l),R=Array(Math.max(n,h)+1).fill(0);for(let c=1;c<=h;c++)R[c]-=v;n<R.length?R[n]+=T:R.push(T);const k=ae(R),K=i*t,Z=j+K+F,Q=a-Y;return{cashFlows:l,netMultiple:Y,netIrr:X,grossIrr:k,feeDrag:Q,netValue:I-Z,totalFees:Z,grossMultiple:a,cashEvents:E}},xe=t=>{const a=Math.max(...t.map(n=>n.length));return Array.from({length:a},(n,s)=>t.reduce((r,d)=>r+(d[s]??0),0))},z=(t,a)=>Math.max(0,Math.min(t,a)),te=t=>Number.isFinite(t)?t:0,ge=(t,a,n,s)=>{const r=Math.min(t,n);let d=a;if(t>n){const l=t-n,h=s-d,i=Math.min(h,l);d+=i}return{buyout:r,vc:d}},A=t=>new Intl.NumberFormat("en-GB",{style:"decimal",maximumFractionDigits:1}).format(t),J=(t,a=1)=>t===null||Number.isNaN(t)?"–":`${(t*100).toFixed(a)}%`,fe=t=>`${t>=0?"+":"−"}€${A(Math.abs(t))}m`;function ve({totalCapital:t,buyoutAllocation:a,vcAllocation:n,currentBuyoutCap:s,vcCap:r,totalAllocated:d,unallocatedCapital:l,includeCoInvest:h,buyoutMainAllocation:i,coInvestAllocation:M,onTotalCapitalChange:x,onBuyoutAllocationChange:f,onVcAllocationChange:B,onToggleCoInvest:E,toggleHelperMessage:v}){return e.jsxs("section",{className:"inputs-panel",children:[e.jsxs("div",{className:"inputs-grid",children:[e.jsxs("div",{className:"input-field",children:[e.jsx("label",{htmlFor:"totalCapital",children:"Total capital allocated to Schroders private funds (€m)"}),e.jsx("input",{id:"totalCapital",type:"number",value:t,onChange:j=>x(Number(j.target.value)),min:0})]}),e.jsxs("div",{className:"input-field",children:[e.jsx("label",{htmlFor:"buyoutAllocation",children:"Buyout allocation (€m)"}),e.jsx("input",{id:"buyoutAllocation",type:"number",value:a,onChange:j=>f(Number(j.target.value)),min:0,max:s})]}),e.jsxs("div",{className:"input-field",children:[e.jsx("label",{htmlFor:"vcAllocation",children:"VC allocation (€m)"}),e.jsx("input",{id:"vcAllocation",type:"number",value:n,onChange:j=>B(Number(j.target.value)),min:0,max:r})]})]}),e.jsxs("div",{className:"capital-status",children:[e.jsxs("span",{children:["Total capital: €",A(t),"m"]}),e.jsxs("span",{children:["Allocated: €",A(d),"m"]}),l>0&&e.jsxs("span",{className:"warning",children:["Unallocated (fund caps): €",A(l),"m"]})]}),e.jsxs("div",{className:"coinvest-toggle",children:[e.jsxs("label",{className:"switch",children:[e.jsx("input",{type:"checkbox",id:"includeCoInvest",checked:h,onChange:j=>E(j.target.checked)}),e.jsx("span",{className:"slider"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"toggle-title",children:"Include co-invest vehicle"}),e.jsx("p",{className:"toggle-helper",children:h?`Split: €${A(i)}m buyout / €${A(M)}m co-invest`:v})]})]})]})}const be=3,je=t=>{if(t.percent===null||t.percent===void 0)return t.label;let a=1;t.percent<1?a=1:t.percent<10?a=2:a=1;const n=t.percent/100,s=J(n,a);return`${t.label} — ${s}`};function oe({events:t,title:a="Cash activity",initialVisible:n=be}){const[s,r]=_.useState(!1);if(!t.length)return null;const d=s?t:t.slice(0,n),l=t.length>n,h=t.length-n;return e.jsxs("div",{className:"cash-events",children:[e.jsx("p",{className:"cash-events__title",children:a}),e.jsx("ul",{children:d.map((i,M)=>e.jsxs("li",{children:[e.jsx("span",{children:je(i)}),e.jsx("span",{className:`cash-amount ${i.amount>=0?"positive":"negative"}`,children:fe(i.amount)})]},`${i.label}-${M}-${i.year??"na"}`))}),l&&e.jsx("button",{className:"cash-events__toggle",type:"button",onClick:()=>r(i=>!i),children:s?"Show less":`Show ${h} more`})]})}function se({label:t,allocation:a,results:n,options:s}){return e.jsxs("div",{className:`fund-card ${s.highlightClass} ${s.disabled?"disabled":""}`,children:[e.jsxs("div",{className:"fund-card__header",children:[e.jsx("p",{className:"fund-card__eyebrow",children:t}),e.jsxs("h3",{children:["€",A(a),"m committed"]})]}),s.slider&&e.jsxs("div",{className:"slider-group",children:[e.jsxs("div",{className:"slider-label",children:[e.jsx("span",{children:"Expected gross multiple"}),e.jsxs("strong",{children:[s.slider.value.toFixed(1),"x"]})]}),e.jsx("input",{type:"range",min:s.slider.min,max:s.slider.max,step:s.slider.step,value:s.slider.value,onChange:r=>s.slider.onChange(Number(r.target.value)),disabled:s.controlsDisabled??s.disabled})]}),s.hideExitSelector?e.jsxs("div",{className:"selector-group readonly",children:[e.jsx("label",{children:"Exit year"}),e.jsx("div",{className:"readonly-pill",children:s.exitNote??`Linked to buyout exit (Year ${s.exitYear})`})]}):e.jsxs("div",{className:"selector-group",children:[e.jsx("label",{htmlFor:`${t}-exit`,children:"Exit year"}),e.jsx("select",{id:`${t}-exit`,value:s.exitYear,onChange:r=>s.onExitYearChange(Number(r.target.value)),disabled:s.controlsDisabled??s.disabled,children:he.map(r=>e.jsxs("option",{value:r,children:["Year ",r]},r))})]}),s.disabled&&s.inactiveMessage&&e.jsx("p",{className:"inactive-message",children:s.inactiveMessage}),e.jsxs("div",{className:"metrics-grid",children:[e.jsxs("div",{className:"metrics-column",children:[e.jsxs("div",{className:"metric-item",children:[e.jsx("p",{className:"metric-label",children:"Gross multiple"}),e.jsx("p",{className:"metric-value",children:s.disabled?"0.00x":`${n.grossMultiple.toFixed(2)}x`})]}),e.jsxs("div",{className:"metric-item",children:[e.jsx("p",{className:"metric-label",children:"Net multiple"}),e.jsx("p",{className:"metric-value",children:s.disabled?"0.00x":`${n.netMultiple.toFixed(2)}x`})]}),e.jsxs("div",{className:"metric-item",children:[e.jsx("p",{className:"metric-label",children:"Fee drag"}),e.jsx("p",{className:"metric-value",children:s.disabled?"0.00x":n.feeDrag>0?`${n.feeDrag.toFixed(2)}x`:"0.00x"})]})]}),e.jsxs("div",{className:"metrics-column",children:[e.jsxs("div",{className:"metric-item",children:[e.jsx("p",{className:"metric-label",children:"Gross IRR"}),e.jsx("p",{className:"metric-value",children:s.disabled?"N/A":n.grossIrr===null?"–":J(n.grossIrr,1)})]}),e.jsxs("div",{className:"metric-item",children:[e.jsx("p",{className:"metric-label",children:"Net IRR"}),e.jsx("p",{className:"metric-value",children:s.disabled?"N/A":n.netIrr===null?"–":J(n.netIrr,1)})]}),e.jsxs("div",{className:"metric-item",children:[e.jsxs("p",{className:"metric-label",children:["Net value (Yr ",s.exitYear,")"]}),e.jsx("p",{className:"metric-value",children:s.disabled?"€0m":`€${A(n.netValue)}m`})]})]})]}),e.jsx(oe,{events:n.cashEvents})]})}function ye({buyout:t,coInvest:a,venture:n}){return e.jsxs("section",{className:"fund-columns",children:[e.jsx(se,{label:"European Buyout Fund",allocation:t.allocation,results:t.results,options:{slider:t.slider,exitYear:t.exitYear,onExitYearChange:t.onExitYearChange,highlightClass:"buyout"}}),e.jsx(se,{label:"Buyout Co-Invest Vehicle",allocation:a.allocation,results:a.results,options:{slider:{...t.slider,value:t.slider.value,onChange:()=>{}},exitYear:t.exitYear,onExitYearChange:()=>{},highlightClass:"coinvest",disabled:!a.active,controlsDisabled:!0,inactiveMessage:a.active?void 0:"Co-invest is disabled. All capital sits in the main buyout fund."}}),e.jsx(se,{label:"European VC Fund",allocation:n.allocation,results:n.results,options:{slider:n.slider,exitYear:n.exitYear,onExitYearChange:n.onExitYearChange,highlightClass:"vc"}})]})}function Ne({netMultiple:t,netIrr:a,totalFees:n,netValue:s,cashEvents:r}){return e.jsxs("section",{className:"blended-panel",children:[e.jsxs("div",{children:[e.jsx("p",{className:"blended-eyebrow",children:"Blended outcome"}),e.jsx("h2",{children:"Portfolio look-through"}),e.jsx("p",{className:"intro",children:"Aggregated cash flows across the combined commitment profile."})]}),e.jsxs("div",{className:"blended-metrics",children:[e.jsxs("div",{children:[e.jsx("p",{className:"metric-label",children:"Net multiple"}),e.jsxs("p",{className:"metric-value",children:[t.toFixed(2),"x"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"metric-label",children:"Net IRR"}),e.jsx("p",{className:"metric-value",children:a===null?"–":J(a,1)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"metric-label",children:"Total fees paid"}),e.jsxs("p",{className:"metric-value",children:["€",A(n),"m"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"metric-label",children:"Net value"}),e.jsxs("p",{className:"metric-value",children:["€",A(s),"m"]})]})]}),e.jsx(oe,{events:r,initialVisible:4})]})}function Ce(){return e.jsxs("div",{className:"case-reference",children:[e.jsx("p",{children:'Case Study: "Stewardship of Multi-Generational Family Wealth at Schroders"'}),e.jsxs("p",{children:["Prepared by Professor"," ",e.jsx("a",{href:"https://www.london.edu/faculty-and-research/faculty-profiles/v/vasvari-v",target:"_blank",rel:"noopener noreferrer",style:{color:"#000",textDecoration:"none"},children:"Florin Vasvari"}),", Academic Director at the Institute of Entrepreneurship and Private Capital, London Business School"]}),e.jsxs("p",{children:[e.jsx("a",{href:"index.html",style:{color:"#000",textDecoration:"none",marginRight:"16px"},children:"← Back to Main"}),"Vibe-coded by"," ",e.jsx("a",{href:"https://www.linkedin.com/in/dima-malyshenko/",target:"_blank",rel:"noopener noreferrer",style:{color:"#000",textDecoration:"none"},children:"Dima Malyshenko"})]})]})}const le=me.funds.reduce((t,a)=>(t[a.name]=a,t),{}),G=le["European Buyout (Main Fund)"],L=le["European Buyout (Co-Investment Fund Vehicle)"],re=le["European VC Fund"],q=G.target_fund_size_eur_millions,V=re.target_fund_size_eur_millions,Me=(L==null?void 0:L.target_fund_size_eur_millions)??0,ne=L&&G?L.target_fund_size_eur_millions/G.target_fund_size_eur_millions:.2,Ee="Entire allocation stays in the main buyout fund.";function Fe(){const[t,a]=_.useState(1300),[n,s]=_.useState(1200),[r,d]=_.useState(100),[l,h]=_.useState(G.expected_gross_return_on_investments_multiple),[i,M]=_.useState(re.expected_gross_return_on_investments_multiple),[x,f]=_.useState(10),[B,E]=_.useState(10),[v,j]=_.useState(!0),g=v?q+Me:q,T=v?1/(1+ne):1,W=v?ne/(1+ne):0,D=_.useMemo(()=>n*T,[n,T]),P=_.useMemo(()=>v?n*W:0,[n,v,W]),w=_.useMemo(()=>ee({allocation:D,grossMultiple:l,exitYear:x,config:G}),[D,l,x]),F=_.useMemo(()=>ee({allocation:P,grossMultiple:l,exitYear:x,config:L}),[P,l,x]),I=_.useMemo(()=>ee({allocation:r,grossMultiple:i,exitYear:B,config:re}),[r,i,B]),U=n+r,C=Math.max(0,t-U),Y=Math.max(x,B),X=_.useMemo(()=>{if(C<=0)return[0];const m=Array(Y+1).fill(0);return m[0]=-C,m[Y]+=C,m},[C,Y]),R=_.useMemo(()=>C<=0?[]:[{label:"Idle cash — retained (Year 0)",amount:-C,year:0},{label:`Idle cash — released (Year ${Y})`,amount:C,year:Y}],[C,Y]),k=_.useMemo(()=>{const m=xe([w.cashFlows,F.cashFlows,I.cashFlows,X]),u=m.reduce((o,$)=>$<0?o-$:o,0),y=m.reduce((o,$)=>$>0?o+$:o,0),p=u===0?0:y/u,N=ae(m),S=w.totalFees+F.totalFees+I.totalFees,H=[...w.cashEvents.map(o=>({...o,label:`Buyout — ${o.label}`})),...F.cashEvents.map(o=>({...o,label:`Co-invest — ${o.label}`})),...I.cashEvents.map(o=>({...o,label:`VC — ${o.label}`})),...R].sort((o,$)=>{const ie=o.year??9999,ce=$.year??9999;return ie!==ce?ie-ce:o.amount-$.amount});return{netMultiple:p,netIrr:N,totalFees:S,netValue:y-u,cashEvents:H}},[w,F,I,X,R]),K=g/(g+V),Z=n+r>0?n/(n+r):K,Q=m=>{const u=Math.max(0,te(m)),y=u*Z;let p=z(Math.min(y,u),g),N=u-p,S=z(N,V);if(N=u-p-S,N>0&&S>=V){const H=g-p,o=Math.min(H,N);p+=o,N-=o}if(N>0&&p>=q){const H=V-S,o=Math.min(H,N);S+=o,N-=o}a(u),s(p),d(S)},c=m=>{const u=z(Math.min(te(m),t),g),y=t-u,p=z(y,V);s(u),d(p)},b=m=>{const u=z(Math.min(te(m),t),V),y=t-u,p=z(y,g);d(u),s(p)};_.useEffect(()=>{const m=g;s(u=>{if(u<=m)return u;const y=u-m;return d(p=>{const N=V-p,S=Math.min(N,y);return p+S}),m})},[g]);const O=m=>{m||s(u=>{const{buyout:y,vc:p}=ge(u,r,q,V);return p!==r&&d(p),y}),j(m)};return e.jsx("div",{className:"app",children:e.jsxs("div",{className:"container",children:[e.jsx("h1",{children:"Stewardship of Multi-Generational Family Wealth at Schroders"}),e.jsx("p",{className:"intro",children:"Model how a bespoke allocation across Schroders Capital buyout, co-investment and venture vehicles translates into net outcomes for a multi-generational family. Adjust the two economic levers the client can influence, and see how fees, carry and timing shape performance."}),e.jsx(ve,{totalCapital:t,buyoutAllocation:n,vcAllocation:r,currentBuyoutCap:g,vcCap:V,totalAllocated:U,unallocatedCapital:C,includeCoInvest:v,buyoutMainAllocation:D,coInvestAllocation:P,onTotalCapitalChange:Q,onBuyoutAllocationChange:c,onVcAllocationChange:b,onToggleCoInvest:O,toggleHelperMessage:Ee}),e.jsxs("div",{className:"disclaimer",children:[e.jsx("strong",{children:"Calculation assumptions:"})," Capital calls are evenly distributed over the first 6 years (investment period), and all investments are divested together at the selected exit year."]}),e.jsx(ye,{buyout:{allocation:D,results:w,slider:{min:0,max:7,step:.1,value:l,onChange:h},exitYear:x,onExitYearChange:f},coInvest:{allocation:P,results:F,exitYear:x,active:v},venture:{allocation:r,results:I,slider:{min:0,max:15,step:.1,value:i,onChange:M},exitYear:B,onExitYearChange:E}}),e.jsx(Ne,{netMultiple:k.netMultiple,netIrr:k.netIrr,totalFees:k.totalFees,netValue:k.netValue,cashEvents:k.cashEvents}),e.jsx(Ce,{})]})})}de.createRoot(document.getElementById("root")).render(e.jsx(ue.StrictMode,{children:e.jsx(Fe,{})}));
