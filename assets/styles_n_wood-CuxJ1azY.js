import{r as s,j as e,c as Nt,R as gt}from"./index-BfPSHq6t.js";const $e=s.createContext(void 0);function Et({children:t}){const[i,d]=s.useState("info");return e.jsx($e.Provider,{value:{activeTab:i,setActiveTab:d},children:e.jsxs("div",{children:[e.jsxs("div",{className:"tabs",children:[e.jsx("button",{className:`tab-button ${i==="info"?"active":""}`,onClick:()=>d("info"),children:"Info"}),e.jsx("button",{className:`tab-button ${i==="operational"?"active":""}`,onClick:()=>d("operational"),children:"Operational Forecast"}),e.jsx("button",{className:`tab-button ${i==="lbo_entry"?"active":""}`,onClick:()=>d("lbo_entry"),children:"LBO Entry"}),e.jsx("button",{className:`tab-button ${i==="exit"?"active":""}`,onClick:()=>d("exit"),children:"Exit"})]}),t]})})}function St(){const t=s.useContext($e);if(!t)throw new Error("TabContent must be used within Tabs");return t}function ve({tab:t,children:i}){const{activeTab:d}=St();return d!==t?null:e.jsx("div",{id:`${t}-tab`,className:"tab-content active",children:i})}const Dt=6,We=4,He=12,Ge=.1,Ct=6,Ue=2006,Mt=1e4,Rt=4e3,At=7.5,It=9,Tt=2,wt=3,Ft=25,Pt=50,Bt=20,Ot=80,kt=1,ze=s.createContext(void 0);function Lt({children:t}){const[i,d]=s.useState(Mt.toString()),[o,l]=s.useState(Rt.toString()),[x,y]=s.useState(At.toString()),[N,S]=s.useState(It.toString()),[g,E]=s.useState(Ft.toString()),[C,f]=s.useState(Dt.toString()),[R,v]=s.useState(Ct.toString()),[m,M]=s.useState(Ue.toString()),[A,u]=s.useState("case-a");return e.jsx(ze.Provider,{value:{seniorDebt:i,setSeniorDebt:d,subordinatedDebt:o,setSubordinatedDebt:l,seniorDebtInterestRate:x,setSeniorDebtInterestRate:y,subordinatedDebtInterestRate:N,setSubordinatedDebtInterestRate:S,taxRate:g,setTaxRate:E,entryMultiple:C,setEntryMultiple:f,exitMultiple:R,setExitMultiple:v,selectedExitYear:m,setSelectedExitYear:M,selectedScenarioId:A,setSelectedScenarioId:u},children:t})}function ce(){const t=s.useContext(ze);if(!t)throw new Error("useLBOAssumptions must be used within an LBOAssumptionsProvider");return t}const Be=t=>({startingBalance:t==null?void 0:t.startingBalance,interest:t==null?void 0:t.interest,repayment:t==null?void 0:t.repayment,endingBalance:t==null?void 0:t.endingBalance});function Vt(t){const i=T=>{const w=T.filter(j=>j!==void 0);if(w.length)return w.reduce((j,F)=>j+F,0)},d=i([t.amountsReceivableOnContracts,t.tradeDebtors,t.otherDebtorsAndPrepayments]),o=t.cashAtBankAndInHandOperating,l=t.currentAssets!==void 0?t.currentAssets:i([d,o]),x=t.accountsPayable??t.tradeCreditors,y=t.currentLiabilities!==void 0?t.currentLiabilities:i([x,t.corporationTax,t.otherTaxationAndSocialSecurity,t.otherCreditorsAndAccruals,t.accruedDividendsAndInterest]),N=t.netWorkingCapital!==void 0?t.netWorkingCapital:l!==void 0&&y!==void 0?l-y:void 0,S=N!==void 0&&t.turnover!==0?N/t.turnover*100:void 0,g=t.turnover+t.costOfSales,E=t.turnover!==0?g/t.turnover*100:0,C=g+t.overheads,f=t.turnover!==0?C/t.turnover*100:0,R=C+(t.depreciation||0),v=C+t.interestReceivable,m=t.turnover!==0?v/t.turnover*100:0,M=(t.increaseDecreaseInDebtors||0)+(t.increaseDecreaseInCreditors||0),A=C+(t.depreciation||0)+M,u=(C||0)+(t.depreciation||0)-M-(t.netCapitalExpenditure||0);return{...t,primaryDebt:Be(t.primaryDebt),secondaryDebt:Be(t.secondaryDebt),accountsReceivables:d,accountsPayable:x,currentAssets:l,currentLiabilities:y,netWorkingCapital:N,netWorkingCapitalToTurnover:S,grossProfit:g,grossProfitMargin:E,ebit:C,ebitMargin:f,ebitda:R,pbt:v,pbtMargin:m,cashFlowFromOperations:A,freeCashFlowPreTax:u}}function Me(t){return{title:t.title,years:t.years.map(Vt)}}function Xe(t,i){if(t.length<2)return;const d=[...t].sort((E,C)=>E.year-C.year),o=d[0],l=d[d.length-1],x=i(o),y=i(l);if(x===void 0||y===void 0||x<=0||y<=0)return;const N=l.year-o.year;if(N<=0)return;const S=y/x;return Math.pow(S,1/N)-1}function Re(t){return Xe(t,i=>i.turnover)}function Ae(t){return Xe(t,i=>i.ebit)}const Ie=[{year:1999,status:"Audited",turnover:85067,costOfSales:-78495,overheads:-4293,interestReceivable:130,depreciation:164,increaseDecreaseInDebtors:-9972,increaseDecreaseInCreditors:7150,interestReceived:130,netCapitalExpenditure:-234},{year:2e3,status:"Audited",turnover:96266,costOfSales:-88778,overheads:-4990,interestReceivable:205,depreciation:249,increaseDecreaseInDebtors:3679,increaseDecreaseInCreditors:-2888,interestReceived:205,netCapitalExpenditure:-359},{year:2001,status:"Audited",turnover:115228,costOfSales:-106125,overheads:-6174,interestReceivable:354,depreciation:363,profitLossOnSaleOfFixedAssets:5,increaseDecreaseInDebtors:518,increaseDecreaseInCreditors:4711,interestReceived:354,netCapitalExpenditure:-752},{year:2002,status:"Audited",turnover:123006,costOfSales:-113105,overheads:-6675,interestReceivable:303,depreciation:291,profitLossOnSaleOfFixedAssets:-18,increaseDecreaseInDebtors:-4154,increaseDecreaseInCreditors:2960,interestReceived:303,netCapitalExpenditure:-408,amountsReceivableOnContracts:10244,tradeDebtors:7520,otherDebtorsAndPrepayments:1682,cashAtBankAndInHandOperating:6590,tradeCreditors:21286,corporationTax:334,otherTaxationAndSocialSecurity:352,otherCreditorsAndAccruals:885,accruedDividendsAndInterest:325}],qt=[{year:2003,status:"Unaudited",turnover:132902,costOfSales:-121871,overheads:-7222,interestReceivable:239,depreciation:408,profitLossOnSaleOfFixedAssets:4,increaseDecreaseInDebtors:-1960,increaseDecreaseInCreditors:4606,interestReceived:239,netCapitalExpenditure:-310,amountsReceivableOnContracts:6035,tradeDebtors:14647,otherDebtorsAndPrepayments:581,cashAtBankAndInHandOperating:4286,tradeCreditors:24925,corporationTax:523,otherTaxationAndSocialSecurity:450,otherCreditorsAndAccruals:1754,accruedDividendsAndInterest:246},{year:2004,status:"Plan",turnover:145e3,costOfSales:-132675,overheads:-7795,interestReceivable:225,depreciation:433,increaseDecreaseInDebtors:1088,increaseDecreaseInCreditors:56,interestReceived:225,netCapitalExpenditure:-633,cashAtBankAndInHandOperating:4286},{year:2005,status:"Forecast",turnover:16e4,costOfSales:-146240,overheads:-8410,interestReceivable:250,depreciation:433,increaseDecreaseInDebtors:-2240,increaseDecreaseInCreditors:2602,interestReceived:250,netCapitalExpenditure:-500,cashAtBankAndInHandOperating:4286},{year:2006,status:"Forecast",turnover:172500,costOfSales:-157405,overheads:-9025,interestReceivable:275,depreciation:433,increaseDecreaseInDebtors:-1870,increaseDecreaseInCreditors:2141,interestReceived:275,netCapitalExpenditure:-564,cashAtBankAndInHandOperating:4286}],_t=[{year:2003,status:"Audited",turnover:132900,costOfSales:-121900,overheads:-6800,interestReceivable:0,depreciation:300,netCapitalExpenditure:-300,increaseDecreaseInDebtors:-1300,increaseDecreaseInCreditors:2600,amountsReceivableOnContracts:6035,tradeDebtors:14647,otherDebtorsAndPrepayments:581,cashAtBankAndInHandOperating:4286,tradeCreditors:24925,corporationTax:523,otherTaxationAndSocialSecurity:450,otherCreditorsAndAccruals:1754,accruedDividendsAndInterest:246},{year:2004,status:"Unaudited",turnover:145200,costOfSales:-132700,overheads:-7600,interestReceivable:0,depreciation:300,netCapitalExpenditure:-500,increaseDecreaseInDebtors:-1750,increaseDecreaseInCreditors:3500},{year:2005,status:"Forecast",turnover:170200,costOfSales:-155300,overheads:-8500,interestReceivable:0,depreciation:400,netCapitalExpenditure:-400,increaseDecreaseInDebtors:-1050,increaseDecreaseInCreditors:2100}],$t=[{year:2003,status:"Unaudited",turnover:132902,costOfSales:-121871,overheads:-7222,interestReceivable:239,depreciation:408,profitLossOnSaleOfFixedAssets:4,increaseDecreaseInDebtors:-1960,increaseDecreaseInCreditors:4606,interestReceived:239,netCapitalExpenditure:-310,amountsReceivableOnContracts:6035,tradeDebtors:14647,otherDebtorsAndPrepayments:581,cashAtBankAndInHandOperating:4286,tradeCreditors:24925,corporationTax:523,otherTaxationAndSocialSecurity:450,otherCreditorsAndAccruals:1754,accruedDividendsAndInterest:246},{year:2004,status:"Unaudited",turnover:145200,costOfSales:-5100,overheads:-135500,interestReceivable:0,depreciation:400,increaseDecreaseInDebtors:1600,increaseDecreaseInCreditors:1600,netCapitalExpenditure:-500},{year:2005,status:"Unaudited",turnover:170700,costOfSales:-5900,overheads:-158700,interestReceivable:0,depreciation:400,increaseDecreaseInDebtors:2950,increaseDecreaseInCreditors:2950,netCapitalExpenditure:-200},{year:2006,status:"Forecast",turnover:263800,costOfSales:-10900,overheads:-242100,interestReceivable:0,depreciation:400,profitLossOnSaleOfFixedAssets:300,increaseDecreaseInDebtors:-50,increaseDecreaseInCreditors:-50,netCapitalExpenditure:-300,netWorkingCapital:-13700},{year:2007,status:"Forecast",turnover:298800,costOfSales:-13200,overheads:-273100,interestReceivable:-1700,depreciation:400,increaseDecreaseInDebtors:900,increaseDecreaseInCreditors:900,netCapitalExpenditure:-400,netWorkingCapital:-15200,corporationTax:3300},{year:2008,status:"Forecast",turnover:338800,costOfSales:-15800,overheads:-308e3,interestReceivable:-1100,depreciation:400,increaseDecreaseInDebtors:1e3,increaseDecreaseInCreditors:1e3,netCapitalExpenditure:-400,netWorkingCapital:-17e3,corporationTax:4300}],Wt={title:"Profit and Loss",years:[...Ie,...qt]},Ht={title:"S&W Financial Results",years:[...Ie,..._t]},Gt={title:"Financial Statements (Exhibit 1b)",years:[...Ie,...$t]},Te=Me(Wt),we=Me(Ht),Fe=Me(Gt),Ut=Re(Te.years),zt=Ae(Te.years),Xt=Re(we.years),Kt=Ae(we.years),Qt=Re(Fe.years),Yt=Ae(Fe.years),oe=[{id:"case-a",name:"Case A",data:Te,turnoverCAGR:Ut,ebitCAGR:zt},{id:"case-b",name:"Case B",data:we,turnoverCAGR:Xt,ebitCAGR:Kt},{id:"case-c",name:"Case C",data:Fe,turnoverCAGR:Qt,ebitCAGR:Yt}],De=2004,Jt=5,Ke=12,Zt=Ke-Jt,Qe=t=>t<De?0:t===De?Zt/Ke:1,ea=0,de=t=>{const i=parseFloat(t);return Number.isNaN(i)?void 0:i},Oe=(t,i,d=1)=>{const o=t,l=ea,x=o===void 0?void 0:o-l,y=o!==void 0&&x!==void 0?(o+x)/2:void 0,N=y!==void 0&&i!==void 0?i/100*y*d:void 0;return{startingBalance:o,interest:N,repayment:l,endingBalance:x}},ta=t=>{var x,y;const i=t.depreciation??0,d=((x=t.primaryDebt)==null?void 0:x.interest)??0,o=((y=t.secondaryDebt)==null?void 0:y.interest)??0;return(t.ebitda??0)-i-t.interestReceivable-d-o};function je(){const{seniorDebt:t,seniorDebtInterestRate:i,subordinatedDebt:d,subordinatedDebtInterestRate:o,taxRate:l,selectedScenarioId:x}=ce();return s.useMemo(()=>{const y=oe.find(A=>A.id===x),N=(y==null?void 0:y.data)??oe[0].data,S=de(t),g=de(i),E=de(d),C=de(o),R=de(l)??0;let v=S,m=E;const M=N.years.map(A=>{let u=A.primaryDebt,T=A.secondaryDebt;if(A.year>=De){const q=Qe(A.year);(v!==void 0||g!==void 0)&&(u=Oe(v,g,q)),(m!==void 0||C!==void 0)&&(T=Oe(m,C,q)),v=u==null?void 0:u.endingBalance,m=T==null?void 0:T.endingBalance}const w={...A,primaryDebt:u,secondaryDebt:T},j=ta(w),F=w.turnover!==0?j/w.turnover*100:0,I=j*R/100,P=j-I;return{...w,pbt:j,pbtMargin:F,taxExpense:I,netIncome:P}});return{...N,years:M}},[t,i,d,o,l,x])}const ne=2004,aa=7/12,Ye=ne-1,sa=2004,Je=t=>(t.increaseDecreaseInDebtors??0)+(t.increaseDecreaseInCreditors??0),Ze=t=>t.changeInOtherLongTermLiabilities??0,et=t=>{const i=t.ebitda??0,d=t.taxExpense??0,o=Je(t),l=Ze(t),x=t.netCapitalExpenditure??0;return i-d-o-l-x},ye=(t,i,d,o)=>d<=0?0:(t+i)/2*(d/100)*o,na=({baseCashFlow:t,seniorStartingBalance:i,subordinatedStartingBalance:d,seniorRatePercent:o,subordinatedRatePercent:l,interestAccrualFactor:x})=>{let y=0,N=0,S=i,g=d,E=ye(i,S,o,x),C=ye(d,g,l,x);const f=12;for(let v=0;v<f;v+=1){const m=Math.max(t-E-C,0),M=Math.min(m,i),A=Math.max(i-M,0),u=ye(i,A,o,x),T=Math.max(m-M,0),j=A===0?Math.min(T,d):0,F=Math.max(d-j,0),I=ye(d,F,l,x),P=Math.abs(u-E)<.01&&Math.abs(I-C)<.01&&Math.abs(M-y)<.01&&Math.abs(j-N)<.01;if(y=M,N=j,S=A,g=F,E=u,C=I,P)break}const R=Math.max(t-E-C,0);return{seniorRepayment:y,subordinatedRepayment:N,seniorEndingBalance:S,subordinatedEndingBalance:g,seniorInterestExpense:E,subordinatedInterestExpense:C,cashFlowAvailableForDebtRepayment:R}},tt=(t,i,d)=>{if(t.length===0)return[];let o,l;return t.map((x,y)=>{var u,T;const N=y===0?((u=x.primaryDebt)==null?void 0:u.startingBalance)??0:Math.max(o??0,0),S=y===0?((T=x.secondaryDebt)==null?void 0:T.startingBalance)??0:Math.max(l??0,0),g=et(x),E=Qe(x.year),{seniorRepayment:C,subordinatedRepayment:f,seniorEndingBalance:R,subordinatedEndingBalance:v,seniorInterestExpense:m,subordinatedInterestExpense:M,cashFlowAvailableForDebtRepayment:A}=na({baseCashFlow:g,seniorStartingBalance:N,subordinatedStartingBalance:S,seniorRatePercent:i,subordinatedRatePercent:d,interestAccrualFactor:E});return o=R,l=v,{year:x.year,cashFlowAvailableForDebtRepayment:A,senior:{startingBalance:N,interestExpense:m,repayment:C,endingBalance:R},subordinated:{startingBalance:S,interestExpense:M,repayment:f,endingBalance:v}}})},at=(t,i,d)=>{var N,S,g,E;if(!t)return;const o=i.get(t);if(o)return o.senior.endingBalance+o.subordinated.endingBalance;if(!d)return;const l=((N=d.primaryDebt)==null?void 0:N.endingBalance)??((S=d.primaryDebt)==null?void 0:S.startingBalance)??0,x=((g=d.secondaryDebt)==null?void 0:g.endingBalance)??((E=d.secondaryDebt)==null?void 0:E.startingBalance)??0,y=l+x;return y===0?void 0:y},st=(t,i)=>{if(!(t===void 0&&i===void 0))return(t??0)-(i??0)},nt=t=>{if(!t)return;const i=t-ne;if(!(i<0))return aa+i};function ra(){const{entryMultiple:t,exitMultiple:i,selectedExitYear:d,seniorDebtInterestRate:o,subordinatedDebtInterestRate:l}=ce(),{years:x}=je(),y=c=>{const B=parseFloat(c);return Number.isNaN(B)?0:B},N=s.useMemo(()=>x.find(c=>c.year===ne),[x]),S=s.useMemo(()=>x.find(c=>c.year===Ye),[x]),g=N==null?void 0:N.ebit,E=S==null?void 0:S.cashAtBankAndInHandOperating,C=s.useMemo(()=>{const c=parseInt(d,10);return Number.isNaN(c)?void 0:c},[d]),f=s.useMemo(()=>x.find(c=>c.year===C),[x,C]),R=f==null?void 0:f.ebit,v=f==null?void 0:f.cashAtBankAndInHandOperating,m=s.useMemo(()=>{const c=parseFloat(t);return Number.isNaN(c)?void 0:c},[t]),M=s.useMemo(()=>{const c=parseFloat(i);return Number.isNaN(c)?void 0:c},[i]),A=s.useMemo(()=>{const c=C??ne;return x.filter(B=>B.year>=ne&&B.year<=c)},[x,C]),u=s.useMemo(()=>{const c=y(o),B=y(l);return tt(A,c,B)},[A,o,l]),T=s.useMemo(()=>{const c=new Map;return u.forEach(B=>c.set(B.year,B)),c},[u]),w=s.useMemo(()=>at(C,T,f),[C,T,f]),j=s.useMemo(()=>st(v,w),[v,w]),F=s.useMemo(()=>{if(!(g===void 0||m===void 0))return g*m},[g,m]),I=s.useMemo(()=>{if(!(R===void 0||M===void 0))return R*M},[R,M]),P=s.useMemo(()=>{if(!(F===void 0||E===void 0))return F+E},[F,E]),q=s.useMemo(()=>{if(!(I===void 0||j===void 0))return I+j},[I,j]),h=s.useMemo(()=>{if(!(P===void 0||q===void 0||P===0))return q/P},[P,q]),r=s.useMemo(()=>nt(C),[C]),b=s.useMemo(()=>{if(!(h===void 0||r===void 0))return Math.pow(h,1/r)-1},[h,r]),p=c=>c===void 0?"—":c.toLocaleString("en-GB",{minimumFractionDigits:0,maximumFractionDigits:0}),k=c=>c===void 0?"—":`${c.toFixed(1)}x`,H=c=>c===void 0?"—":`${c.toFixed(2)}x`,Q=c=>c===void 0?"—":`${(c*100).toFixed(1)}%`,ee=c=>c===void 0?"—":`${c.toFixed(1)} yrs`,ae=c=>{if(c===void 0||Number.isNaN(c))return[];const B=.25,K=6,V=[];for(let z=-K;z<=K;z+=1){const re=parseFloat((c+z*B).toFixed(2));re>0&&V.push(re)}return V},G=s.useMemo(()=>ae(m),[m]),L=s.useMemo(()=>ae(M),[M]),U=s.useMemo(()=>G.length===0||L.length===0||g===void 0||E===void 0||R===void 0||j===void 0||r===void 0||r<=0?[]:L.map(c=>{const B=R*c+j;return G.map(K=>{const V=g*K+E;if(V<=0||B<=0)return;const z=B/V;if(!(z<=0))return Math.pow(z,1/r)-1})}),[G,L,g,E,R,j,r]),se=s.useMemo(()=>{const c=Math.max(...x.map(B=>B.ebit??0),1);return x.map(B=>({year:B.year,value:B.ebit??0,ratio:(B.ebit??0)/c}))},[x]);return e.jsxs("div",{className:"info-dashboard",children:[e.jsxs("div",{className:"info-summary",children:[e.jsxs("div",{className:"info-summary-grid",children:[e.jsxs("div",{className:"info-summary-item",children:[e.jsx("span",{className:"info-label info-summary-label",children:"Company Name"}),e.jsx("span",{className:"info-value info-summary-value",children:"Styles & Wood Limited ('S&W')"})]}),e.jsxs("div",{className:"info-summary-item",children:[e.jsx("span",{className:"info-label info-summary-label",children:"Holding period"}),e.jsx("span",{className:"info-value info-summary-value",children:ee(r)})]}),e.jsxs("div",{className:"info-summary-item",children:[e.jsx("span",{className:"info-label info-summary-label",children:"Entry Date"}),e.jsx("span",{className:"info-value info-summary-value",children:"May 2004"})]}),e.jsxs("div",{className:"info-summary-item",children:[e.jsx("span",{className:"info-label info-summary-label",children:"Exit Date"}),e.jsx("span",{className:"info-value info-summary-value",children:C??"—"})]}),e.jsxs("div",{className:"info-summary-item",children:[e.jsx("span",{className:"info-label info-summary-label",children:"Entry multiple"}),e.jsx("span",{className:"info-value info-summary-value",children:k(m)})]}),e.jsxs("div",{className:"info-summary-item",children:[e.jsx("span",{className:"info-label info-summary-label",children:"Exit multiple"}),e.jsx("span",{className:"info-value info-summary-value",children:k(M)})]}),e.jsxs("div",{className:"info-summary-item",children:[e.jsx("span",{className:"info-label info-summary-label",children:"Enterprise value (entry)"}),e.jsx("span",{className:"info-value info-summary-value",children:p(F)})]}),e.jsxs("div",{className:"info-summary-item",children:[e.jsx("span",{className:"info-label info-summary-label",children:"Enterprise value (exit)"}),e.jsx("span",{className:"info-value info-summary-value",children:p(I)})]}),e.jsxs("div",{className:"info-summary-item",children:[e.jsx("span",{className:"info-label info-summary-label",children:"Equity value (entry)"}),e.jsx("span",{className:"info-value info-summary-value",children:p(P)})]}),e.jsxs("div",{className:"info-summary-item",children:[e.jsx("span",{className:"info-label info-summary-label",children:"Equity value (exit)"}),e.jsx("span",{className:"info-value info-summary-value",children:p(q)})]}),e.jsxs("div",{className:"info-summary-item",children:[e.jsx("span",{className:"info-label info-summary-label",children:"MOIC"}),e.jsx("span",{className:"info-value info-summary-value",children:H(h)})]}),e.jsxs("div",{className:"info-summary-item",children:[e.jsx("span",{className:"info-label info-summary-label",children:"IRR"}),e.jsx("span",{className:"info-value info-summary-value",children:Q(b)})]})]}),e.jsxs("div",{className:"info-sensitivity-card",children:[e.jsx("h3",{className:"info-sensitivity-title",children:"IRR Sensitivity"}),U.length>0?e.jsx("div",{className:"info-sensitivity-table-wrapper",children:e.jsxs("table",{className:"info-sensitivity-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"exit-sensitivity-corner-cell",children:"Exit \\ Entry"}),G.map(c=>e.jsxs("th",{className:"exit-sensitivity-header-cell",children:[c.toFixed(2),"x"]},`info-entry-multiple-${c}`))]})}),e.jsx("tbody",{children:L.map((c,B)=>{var K;return e.jsxs("tr",{children:[e.jsxs("th",{className:"exit-sensitivity-header-cell",children:[c.toFixed(2),"x"]}),(K=U[B])==null?void 0:K.map((V,z)=>e.jsx("td",{className:"exit-sensitivity-cell",children:V===void 0?"—":Q(V)},`info-irr-cell-${c}-${G[z]}`))]},`info-exit-multiple-row-${c}`)})})]})}):e.jsx("p",{className:"info-sensitivity-empty",children:"Adjust exit assumptions to view sensitivity."})]})]}),e.jsxs("div",{className:"info-chart-card",children:[e.jsx("h3",{className:"info-chart-title",children:"EBIT progression"}),e.jsx("div",{className:"info-ebitda-chart",children:se.map(c=>e.jsxs("div",{className:"info-chart-bar vertical",children:[e.jsx("div",{className:"info-chart-bar-track vertical",children:e.jsx("div",{className:"info-chart-bar-fill vertical",style:{height:`${Math.max(c.ratio*100,4)}%`}})}),e.jsx("span",{className:"info-chart-bar-label",children:c.year}),e.jsx("span",{className:"info-chart-bar-value",children:p(c.value)})]},c.year))})]})]})}function ia(){return e.jsx(ra,{})}function la({years:t}){return e.jsxs("thead",{children:[e.jsxs("tr",{className:"accounting-year-data-header-row",children:[e.jsx("th",{className:"accounting-year-data-label-cell",children:"Years ending 31 December"}),t.map(i=>e.jsx("th",{className:"accounting-year-data-year-cell",children:i.year},i.year))]}),e.jsxs("tr",{className:"accounting-year-data-header-row",children:[e.jsx("th",{className:"accounting-year-data-label-cell"}),t.map(i=>e.jsx("th",{className:"accounting-year-data-unit-cell",children:"£000"},i.year))]}),e.jsxs("tr",{className:"accounting-year-data-header-row",children:[e.jsx("th",{className:"accounting-year-data-label-cell"}),t.map(i=>e.jsx("th",{className:"accounting-year-data-status-cell",children:i.status},i.year))]})]})}function W({label:t,years:i,getValue:d,isBold:o=!1,isDoubleUnderline:l=!1,isSingleUnderline:x=!1,formatValue:y,isSticky:N=!1,stickyOffset:S=0,isNested:g=!1,rowRef:E}){const f=y||(m=>m.toLocaleString("en-GB",{minimumFractionDigits:0,maximumFractionDigits:0})),R=["accounting-year-data-data-row",o?"accounting-year-data-bold":"",l?"accounting-year-data-double-underline":"",x?"accounting-year-data-single-underline":"",g?"accounting-year-data-nested-row":"",N?"accounting-year-data-sticky-row":""].filter(Boolean).join(" "),v=N?{top:S}:void 0;return e.jsxs("tr",{className:R,style:v,ref:E,children:[e.jsx("td",{className:`accounting-year-data-label-cell ${g?"accounting-year-data-nested-label":""}`,children:t}),i.map(m=>{const M=d(m);return e.jsx("td",{className:"accounting-year-data-value-cell",children:M!==void 0?f(M):""},m.year)})]})}function Ee({label:t,years:i,getMargin:d}){const o=l=>`${l.toFixed(2)}%`;return e.jsxs("tr",{className:"accounting-year-data-margin-row",children:[e.jsx("td",{className:"accounting-year-data-label-cell",children:t}),i.map(l=>{const x=d(l);return e.jsx("td",{className:"accounting-year-data-margin-cell",children:x!==void 0?o(x):""},l.year)})]})}function oa(){const{selectedScenarioId:t}=ce();return s.useMemo(()=>oe.find(i=>i.id===t)??oe[0],[t])}const Se=1.5;function ca(){const{years:t}=je(),{selectedScenarioId:i,setSelectedScenarioId:d}=ce(),o=oa(),l=h=>r=>r[h],x=h=>h===void 0?"":h.toLocaleString("en-GB",{minimumFractionDigits:0,maximumFractionDigits:0}),y=h=>h!==void 0?`${(h*100).toFixed(1)}%`:"-",N=s.useRef(null),S=s.useRef(null),[g,E]=s.useState(0),[C,f]=s.useState(0),[R,v]=s.useState({accountsReceivables:!1}),m=s.useMemo(()=>{const h={};return t.forEach(r=>{l("netWorkingCapitalToTurnover")(r)===void 0&&(h[r.year]=Se.toString())}),h},[t]),[M,A]=s.useState(m),u=s.useMemo(()=>t.map(r=>{const b=M[r.year],p=b!==void 0?parseFloat(b):Se,k=r.netWorkingCapital!==void 0?r.netWorkingCapital:Number.isNaN(p)?void 0:p/100*r.turnover;return{...r,netWorkingCapitalDerived:k}}).map((r,b,p)=>{let k;if(b===0)k=void 0;else{const ee=p[b-1];r.netWorkingCapitalDerived===void 0||ee.netWorkingCapitalDerived===void 0?k=void 0:k=r.netWorkingCapitalDerived-ee.netWorkingCapitalDerived}const H=k??0,Q=(r.ebit||0)+(r.depreciation||0)-H-(r.netCapitalExpenditure||0);return{...r,changeInWorkingCapitalDerived:k,freeCashFlowPreTaxDerived:Q}}),[t,M]),T=s.useCallback(h=>{v(r=>({...r,[h]:!r[h]}))},[]),w=s.useCallback((h,r)=>{A(b=>({...b,[h]:r}))},[]),j=()=>e.jsxs("tr",{className:"accounting-year-data-data-row",children:[e.jsx("td",{className:"accounting-year-data-label-cell",children:"Net working capital / Turnover (%)"}),u.map(h=>{const r=l("netWorkingCapitalToTurnover")(h);if(r!==void 0)return e.jsx("td",{className:"accounting-year-data-value-cell",children:`${r.toFixed(2)}%`},h.year);const b=M[h.year]??Se.toString();return e.jsx("td",{className:"accounting-year-data-value-cell",children:e.jsxs("label",{className:"nwc-assumption-field",children:[e.jsx("input",{type:"number",step:"0.1",min:"0",value:b,onChange:p=>w(h.year,p.target.value),className:"nwc-assumption-input","aria-label":`Assumed net working capital to turnover ratio for ${h.year}`}),e.jsx("span",{className:"nwc-assumption-suffix",children:"%"})]})},h.year)})]});s.useEffect(()=>{const h=()=>{const r=N.current;if(!r)return;const b=r.querySelector("thead tr");if(!b)return;const{height:p}=b.getBoundingClientRect();E(p)};return h(),window.addEventListener("resize",h),()=>{window.removeEventListener("resize",h)}},[t.length]),s.useLayoutEffect(()=>{const h=()=>{const r=S.current;if(!r)return;const{height:b}=r.getBoundingClientRect();f(p=>p===b?p:b)};return h(),window.addEventListener("resize",h),()=>{window.removeEventListener("resize",h)}},[u.length]);const F=(h,r)=>e.jsx("tr",{className:"accounting-year-data-section-row",children:e.jsx("td",{className:"accounting-year-data-section-cell",colSpan:u.length+1,children:h})}),I=(h,r)=>r?e.jsxs("tr",{className:"accounting-year-data-subsection-row",children:[e.jsx("td",{className:"accounting-year-data-subsection-cell",children:h}),u.map(b=>e.jsx("td",{className:"accounting-year-data-subsection-value-cell",children:x(r(b))},b.year))]}):e.jsx("tr",{className:"accounting-year-data-subsection-row",children:e.jsx("td",{className:"accounting-year-data-subsection-cell",colSpan:u.length+1,children:h})}),P=g+C,q=h=>{d(h.target.value)};return e.jsxs("div",{className:"accounting-year-data-container",children:[e.jsx("h2",{className:"accounting-year-data-title",children:"Operational Forecast"}),e.jsxs("div",{className:"lbo-entry-scenario-selector",children:[e.jsx("label",{htmlFor:"operational-scenario-select",className:"lbo-entry-scenario-label",children:"Scenario:"}),e.jsx("select",{id:"operational-scenario-select",value:i,onChange:q,className:"lbo-entry-scenario-select",children:oe.map(h=>e.jsx("option",{value:h.id,children:h.name},h.id))})]}),e.jsxs("table",{className:"accounting-year-data-table",ref:N,children:[e.jsx(la,{years:u}),e.jsxs("tbody",{children:[F("Income Statement"),e.jsx(W,{label:"Turnover",years:u,getValue:l("turnover"),isSticky:!0,stickyOffset:g,rowRef:S}),e.jsxs("tr",{className:"accounting-year-data-data-row accounting-year-data-cagr-row",children:[e.jsx("td",{className:"accounting-year-data-label-cell accounting-year-data-cagr-label",children:"CAGR"}),e.jsx("td",{className:"accounting-year-data-value-cell accounting-year-data-cagr-value",colSpan:u.length,children:y(o==null?void 0:o.turnoverCAGR)})]}),e.jsx(W,{label:"Cost of sales",years:u,getValue:l("costOfSales")}),e.jsx(W,{label:"Gross profit",years:u,getValue:l("grossProfit")}),e.jsx(W,{label:"Overheads",years:u,getValue:l("overheads")}),e.jsx(W,{label:"EBITDA",years:u,getValue:l("ebitda"),isBold:!0}),e.jsx(W,{label:"EBIT",years:u,getValue:l("ebit"),isBold:!0,isSticky:!0,stickyOffset:P}),e.jsxs("tr",{className:"accounting-year-data-data-row accounting-year-data-cagr-row",children:[e.jsx("td",{className:"accounting-year-data-label-cell accounting-year-data-cagr-label",children:"CAGR"}),e.jsx("td",{className:"accounting-year-data-value-cell accounting-year-data-cagr-value",colSpan:u.length,children:y(o==null?void 0:o.ebitCAGR)})]}),e.jsx(W,{label:"Interest receivable",years:u,getValue:l("interestReceivable")}),e.jsx(W,{label:"PBT",years:u,getValue:l("pbt"),isBold:!0,isDoubleUnderline:!0}),e.jsx(Ee,{label:"Gross profit margin (%)",years:u,getMargin:l("grossProfitMargin")}),e.jsx(Ee,{label:"EBIT margin (%)",years:u,getMargin:l("ebitMargin")}),e.jsx(Ee,{label:"PBT margin (%)",years:u,getMargin:l("pbtMargin")}),F("Capital Movement"),I("Current assets",l("currentAssets")),e.jsxs("tr",{className:"accounting-year-data-aggregate-row",children:[e.jsxs("td",{className:"accounting-year-data-label-cell accounting-year-data-label-with-toggle",children:[e.jsx("span",{children:"Accounts receivables"}),e.jsx("button",{type:"button",className:"accounting-year-data-toggle",onClick:()=>T("accountsReceivables"),"aria-expanded":R.accountsReceivables,"aria-label":`${R.accountsReceivables?"Collapse":"Expand"} accounts receivables`,children:e.jsx("span",{className:"accounting-year-data-toggle-icon",children:R.accountsReceivables?"−":"+"})})]}),u.map(h=>e.jsx("td",{className:"accounting-year-data-value-cell",children:x(l("accountsReceivables")(h))},h.year))]}),R.accountsReceivables&&e.jsxs(e.Fragment,{children:[e.jsx(W,{label:"Amounts receivable on contracts",years:u,getValue:l("amountsReceivableOnContracts"),isNested:!0}),e.jsx(W,{label:"Trade debtors",years:u,getValue:l("tradeDebtors"),isNested:!0}),e.jsx(W,{label:"Other debtors and prepayments",years:u,getValue:l("otherDebtorsAndPrepayments"),isNested:!0})]}),e.jsx(W,{label:"Cash at bank and in hand (operating cash only)",years:u,getValue:l("cashAtBankAndInHandOperating")}),I("Current liabilities",l("currentLiabilities")),e.jsx(W,{label:"Account payable",years:u,getValue:l("accountsPayable")}),e.jsx(W,{label:"Corporation tax",years:u,getValue:l("corporationTax")}),e.jsx(W,{label:"Other taxation and social security",years:u,getValue:l("otherTaxationAndSocialSecurity")}),e.jsx(W,{label:"Other creditors and accruals",years:u,getValue:l("otherCreditorsAndAccruals")}),e.jsx(W,{label:"Accrued dividends and interest",years:u,getValue:l("accruedDividendsAndInterest")}),I("Net working capital",h=>h.netWorkingCapitalDerived),j(),F("Cash Flow"),e.jsx(W,{label:"EBIT",years:u,getValue:l("ebit")}),e.jsx(W,{label:"Depreciation",years:u,getValue:l("depreciation")}),e.jsxs("tr",{className:"accounting-year-data-aggregate-row",children:[e.jsx("td",{className:"accounting-year-data-label-cell",children:"Change in working capital"}),u.map(h=>e.jsx("td",{className:"accounting-year-data-value-cell",children:x(h.changeInWorkingCapitalDerived)},h.year))]}),e.jsx(W,{label:"Net capital expenditure",years:u,getValue:l("netCapitalExpenditure")}),e.jsx(W,{label:"Free cash flow (pre-tax)",years:u,getValue:h=>h.freeCashFlowPreTaxDerived,isBold:!0,isDoubleUnderline:!0})]})]}),e.jsxs("div",{className:"nwc-assumption-legend","aria-live":"polite",children:[e.jsx("span",{className:"nwc-assumption-legend-swatch","aria-hidden":"true"}),e.jsx("span",{children:"Blue border indicates editable assumed ratio"})]})]})}const da=[{id:"3i",name:"3i Group",ownershipPercent:36.5,isManagement:!1,exitsFully:!0},{id:"g-quiligotti",name:"Gerard Quiligotti",ownershipPercent:37.465,isManagement:!0},{id:"astle",name:"Astle Holdings (Fawcett)",ownershipPercent:12.7,isManagement:!0},{id:"g-clark",name:"Graham Clark",ownershipPercent:4.445,isManagement:!0},{id:"m-raftery",name:"Martin Raftery",ownershipPercent:4.445,isManagement:!0},{id:"d-howarth",name:"David Howarth",ownershipPercent:4.445,isManagement:!0},{id:"employee-pool",name:"Employee Pool (authorised not issued)",ownershipPercent:5,isManagement:!0,lockedPostDealPercent:5}],le={dateLabel:"Pre-2004 Secondary Buyout",ownershipPercentTotal:100,equitySponsorName:"Aberdeen"},ua=t=>Math.min(Math.max(t,0),100),ke=(t,i)=>(i.ownershipPercent??0)-(t.ownershipPercent??0),fe=t=>t.id??t.name;function ma({managementRolloverRate:t,equityPlug:i,equityValue:d,preDealShareholders:o,ownershipPercentTotal:l}){const x=parseFloat(t),y=ua(Number.isNaN(x)?0:x);o.reduce((r,b)=>r+(b.ownershipPercent??0),0);const N=l,S=N>0,g=o.map(r=>{let b=r.equityValue??0;return r.equityValue===void 0&&d!==void 0&&S&&r.ownershipPercent!==void 0&&(b=r.ownershipPercent/N*d),{shareholder:r,derivedValue:b}});let E=g.reduce((r,b)=>r+b.derivedValue,0);E===0&&typeof d=="number"&&(E=d);const C=g.map(({shareholder:r,derivedValue:b})=>{const p=r.ownershipPercent,k=p!==void 0?p:E>0?b/E*100:void 0;return{id:fe(r),name:r.name,equityValue:b,ownershipPercent:k,isManagement:r.isManagement,exitsFully:r.exitsFully}}).sort(ke),f=i===void 0?void 0:Math.max(i,0),v=g.filter(r=>r.shareholder.lockedPostDealPercent!==void 0).reduce((r,b)=>r+(b.shareholder.lockedPostDealPercent??0),0),m=f===void 0?void 0:Math.min(v/100*f,f),M=g.filter(r=>!r.shareholder.exitsFully&&r.shareholder.lockedPostDealPercent===void 0),A=M.reduce((r,b)=>r+b.derivedValue,0),u=y/100*A,T=f===void 0?void 0:Math.max(f-(m??0),0),w=T===void 0?void 0:Math.min(u,A,T),j=f===void 0?void 0:Math.max(f-(w??0)-(m??0),0),F=new Map;w!==void 0&&M.forEach(r=>{const b=A>0?r.derivedValue/A*w:w/M.length||0;F.set(fe(r.shareholder),b)});const I=g.map(({shareholder:r})=>{if(r.exitsFully)return;const b=r.lockedPostDealPercent,p=b!==void 0&&f!==void 0?b/100*f:void 0,k=F.get(fe(r));let H;p!==void 0?H=p:k!==void 0?H=k:f===void 0?H=void 0:H=0;const Q=b!==void 0?b:f&&f>0&&H!==void 0?H/f*100:void 0;return{id:fe(r),name:r.name,equityValue:H,ownershipPercent:Q,isManagement:r.isManagement}}).filter(r=>r!==void 0),P=f===void 0?void 0:f-(j??0);I.push({id:"sponsor-equity",name:"Sponsor equity",equityValue:j,ownershipPercent:f&&f>0&&j!==void 0?j/f*100:void 0,isSponsor:!0}),I.sort(ke);const q=f&&f>0&&P!==void 0?P/f*100:void 0,h=f&&f>0&&j!==void 0?j/f*100:q!==void 0?Math.max(100-q,0):void 0;return{managementRolloverPercent:y,managementRolloverAmount:w,sponsorEquityAmount:j,managementPostDealOwnershipPct:q,sponsorPostDealOwnershipPct:h,preDealStructure:C,postDealStructure:I,totalPreDealEquityValue:E,totalRolledEquityAmount:P}}const Le=["#4caf50","#2196f3","#ff9800","#8bc34a","#9c27b0","#f44336","#00bcd4","#673ab7","#cddc39","#ff5722"];function Ce({data:t,width:i=300,height:d=300,emptyStateMessage:o="No data available to display.",minLabelPercentage:l=5}){const x=s.useRef(null),y=s.useMemo(()=>t.map((v,m)=>({label:v.label,value:typeof v.value=="number"&&v.value>0?v.value:0,color:v.color??Le[m%Le.length]})).filter(v=>v.value>0),[t]),N=s.useMemo(()=>y.reduce((v,m)=>v+m.value,0),[y]),S=s.useMemo(()=>y.map(v=>({...v,percentage:N>0?v.value/N*100:0})),[y,N]),g=()=>{if(typeof window<"u"){const v=window.innerWidth<=480,m=window.innerWidth<=768;if(v)return{width:Math.min(200,i),height:Math.min(200,d)};if(m)return{width:Math.min(250,i),height:Math.min(250,d)}}return{width:i,height:d}},[E,C]=s.useState(()=>g()),[f,R]=s.useState(()=>typeof window<"u"?window.innerWidth<=768:!1);return s.useEffect(()=>{if(typeof window>"u"){C(g());return}const v=()=>{C(g()),R(window.innerWidth<=768)};return v(),window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[i,d]),s.useEffect(()=>{const v=x.current;if(!v)return;const m=v.getContext("2d");if(!m)return;v.width=E.width,v.height=E.height;const{width:M,height:A}=v,u=M/2,T=A/2,w=Math.min(u,T)-20;if(m.clearRect(0,0,M,A),S.length===0)return;let j=-Math.PI/2;S.forEach(F=>{const I=F.percentage/100*2*Math.PI;if(m.beginPath(),m.moveTo(u,T),m.arc(u,T,w,j,j+I),m.closePath(),m.fillStyle=F.color,m.fill(),m.strokeStyle="#fff",m.lineWidth=2,m.stroke(),F.percentage>=l){const P=j+I/2,q=u+Math.cos(P)*(w*.7),h=T+Math.sin(P)*(w*.7);m.fillStyle="#fff";const r=M<=200?10:12;m.font=`bold ${r}px sans-serif`,m.textAlign="center",m.textBaseline="middle",m.fillText(`${F.percentage.toFixed(1)}%`,q,h)}j+=I})},[S,E,l]),S.length===0?e.jsx("div",{style:{width:"100%",textAlign:"center",color:"#6b7280",fontSize:"13px",fontStyle:"italic"},children:o}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"},children:[e.jsx("canvas",{ref:x,width:E.width,height:E.height,style:{maxWidth:"100%",height:"auto"}}),e.jsx("div",{style:{textAlign:"center",marginTop:"10px",width:"100%"},children:S.map((v,m)=>e.jsxs("div",{style:{display:f?"block":"inline-block",margin:f?"3px 0":"3px 10px"},children:[e.jsx("span",{style:{display:"inline-block",width:"16px",height:"16px",background:v.color,borderRadius:"3px",verticalAlign:"middle",marginRight:"6px"}}),e.jsxs("span",{style:{fontSize:f?"11px":"12px"},children:[v.label,": ",v.percentage.toFixed(1),"%"]})]},`${v.label}-${m}`))})]})}function ba({data:t,width:i=300,height:d=300,sponsorLabel:o}){const l=o??"Sponsor equity",x=[{label:"Target cash acquired",value:t.targetCash??0,color:"#4caf50"},{label:"Senior debt",value:t.seniorDebt,color:"#2196f3"},{label:"Subordinated debt",value:t.subordinatedDebt,color:"#ff9800"},{label:"Management rollover",value:t.managementRollover,color:"#8bc34a"},{label:l,value:t.sponsorEquity,color:"#9c27b0"}];return e.jsx(Ce,{data:x,width:i,height:d,emptyStateMessage:"Add at least one funding source to display the distribution."})}const Ve=t=>t.length?t.reduce((o,l)=>o+(l.ownershipPercent??0),0)>0?t.map(o=>({label:o.name,value:o.ownershipPercent??0})).filter(o=>o.value>0):t.reduce((o,l)=>o+(l.equityValue??0),0)>0?t.map(o=>({label:o.name,value:o.equityValue??0})).filter(o=>o.value>0):[]:[];function ha(){const{years:t}=je(),{seniorDebt:i,setSeniorDebt:d,subordinatedDebt:o,setSubordinatedDebt:l,seniorDebtInterestRate:x,setSeniorDebtInterestRate:y,subordinatedDebtInterestRate:N,setSubordinatedDebtInterestRate:S,entryMultiple:g,setEntryMultiple:E,taxRate:C,setTaxRate:f,selectedScenarioId:R,setSelectedScenarioId:v}=ce(),[m,M]=s.useState(Tt.toString()),[A,u]=s.useState(wt.toString()),[T,w]=s.useState(Pt.toString()),[j,F]=s.useState(!1),I=le==null?void 0:le.ownershipPercentTotal,P=le==null?void 0:le.equitySponsorName,q=s.useMemo(()=>{const n=parseFloat(g);return Number.isNaN(n)?void 0:n},[g]),h=s.useMemo(()=>{const n=parseFloat(T);return Number.isNaN(n)?void 0:n},[T]),r=s.useMemo(()=>{const n=t.find(te=>te.year===2004);return n==null?void 0:n.ebit},[t]),b=s.useMemo(()=>{const n=t.find(te=>te.year===2003);return n==null?void 0:n.cashAtBankAndInHandOperating},[t]),p=s.useMemo(()=>{if(!(r===void 0||q===void 0))return r*q},[r,q]),k=s.useMemo(()=>{if(!(p===void 0||b===void 0))return p+b},[p,b]),H=0,Q=s.useMemo(()=>{if(p===void 0)return 0;const n=parseFloat(A);return Number.isNaN(n)?0:n/100*p},[p,A]),ee=s.useMemo(()=>{const n=parseFloat(i),te=parseFloat(o),he=(Number.isNaN(n)?0:n)+(Number.isNaN(te)?0:te),xe=parseFloat(m);return Number.isNaN(xe)?0:xe/100*he},[i,o,m]),ae=s.useMemo(()=>{if(k!==void 0)return k+H+Q+ee},[k,H,Q,ee]),G=s.useMemo(()=>{const n=parseFloat(i);return Number.isNaN(n)?0:n},[i]),L=s.useMemo(()=>{const n=parseFloat(o);return Number.isNaN(n)?0:n},[o]),U=s.useMemo(()=>{if(ae!==void 0)return ae-G-L},[ae,G,L]),{managementRolloverAmount:se,sponsorEquityAmount:c,managementPostDealOwnershipPct:B,sponsorPostDealOwnershipPct:K,preDealStructure:V,postDealStructure:z,totalPreDealEquityValue:re,totalRolledEquityAmount:ie}=s.useMemo(()=>ma({managementRolloverRate:T,equityPlug:U,equityValue:k,preDealShareholders:da,ownershipPercentTotal:I}),[T,U,k,I]),ue=s.useMemo(()=>{if(U===void 0)return;const n=ie??se??0,te=c??0;return G+L+n+te},[U,G,L,ie,se,c]),me=s.useMemo(()=>{if(!(r===void 0||r===0))return G/r},[r,G]),be=s.useMemo(()=>{if(!(r===void 0||r===0))return(G+L)/r},[r,G,L]),_=n=>n===void 0?"":n.toLocaleString("en-GB",{minimumFractionDigits:0,maximumFractionDigits:0}),a=n=>n===void 0?"-":`${n.toFixed(1)}x`,D=n=>n===void 0?"-":`${n.toFixed(1)}%`,O=n=>{w(n)},$=V.length>0,X=s.useMemo(()=>new Map(z.map(n=>[n.id??n.name,n])),[z]),Y=U!==void 0&&U>0,Z=s.useMemo(()=>z.map(n=>n.isSponsor?{...n,name:P}:n),[z,P]),rt=s.useMemo(()=>Ve(V),[V]),it=s.useMemo(()=>Y?Ve(Z):[],[Z,Y]),{managementCashPayment:lt,paymentTo3i:ot,managementRolloverSplitValue:ct}=s.useMemo(()=>{if(!$)return{managementCashPayment:0,paymentTo3i:0,managementRolloverSplitValue:0};const n=V.filter(J=>J.isManagement&&!J.exitsFully),te=n.reduce((J,pe)=>J+(pe.equityValue??0),0),he=n.reduce((J,pe)=>{var Pe;return J+(((Pe=X.get(pe.id??pe.name))==null?void 0:Pe.equityValue)??0)},0),xe=Math.max(te-he,0),ge=V.find(J=>(J.id??J.name).toLowerCase()==="3i"||J.name.toLowerCase().includes("3i"))??V.find(J=>J.exitsFully),jt=(ge==null?void 0:ge.equityValue)??0;return{managementCashPayment:xe,paymentTo3i:jt,managementRolloverSplitValue:he}},[$,V,X]),Ne=$&&k!==void 0,dt=()=>{Ne&&F(n=>!n)},ut=n=>{E(n)},mt=n=>{d(n)},bt=n=>{l(n)},ht=n=>{y(n)},xt=n=>{S(n)},pt=n=>{M(n)},vt=n=>{u(n)},yt=n=>{f(n)},ft=n=>{v(n.target.value)};return e.jsxs("div",{className:"lbo-entry-container",children:[e.jsx("h2",{className:"lbo-entry-title",children:"LBO Entry"}),e.jsxs("div",{className:"lbo-entry-scenario-selector",children:[e.jsx("label",{htmlFor:"scenario-select",className:"lbo-entry-scenario-label",children:"Scenario:"}),e.jsx("select",{id:"scenario-select",value:R,onChange:ft,className:"lbo-entry-scenario-select",children:oe.map(n=>e.jsx("option",{value:n.id,children:n.name},n.id))})]}),e.jsx("div",{className:"lbo-entry-form",children:e.jsxs("div",{className:"lbo-entry-form-grid",children:[e.jsxs("div",{className:"lbo-entry-form-column",children:[e.jsxs("div",{className:"lbo-entry-row",children:[e.jsx("span",{className:"lbo-entry-label",children:"Transaction Date:"}),e.jsx("span",{className:"lbo-entry-value",children:"May 2004"})]}),e.jsxs("div",{className:"lbo-entry-row",children:[e.jsx("span",{className:"lbo-entry-label",children:"Entry EBIT:"}),e.jsx("span",{className:"lbo-entry-value",children:_(r)})]}),e.jsxs("div",{className:"lbo-entry-row",children:[e.jsx("label",{className:"lbo-entry-label",htmlFor:"lbo-entry-multiple-slider",children:"Multiple:"}),e.jsxs("div",{className:"lbo-entry-slider-control",children:[e.jsx("input",{id:"lbo-entry-multiple-slider",type:"range",min:We,max:He,step:Ge,value:g,onChange:n=>ut(n.target.value),className:"lbo-entry-slider","aria-label":"Assumed multiple for enterprise value calculation"}),e.jsx("span",{className:"lbo-entry-slider-value",children:a(q)})]})]}),e.jsxs("div",{className:"lbo-entry-row lbo-entry-row-calculated",children:[e.jsx("span",{className:"lbo-entry-label",children:"Enterprise Value (EV):"}),e.jsx("span",{className:"lbo-entry-value lbo-entry-value-calculated",children:_(p)})]}),e.jsxs("div",{className:"lbo-entry-row",children:[e.jsx("span",{className:"lbo-entry-label",children:"Net Cash (minus Debt):"}),e.jsx("span",{className:"lbo-entry-value lbo-entry-value-calculated",children:_(b)})]}),e.jsxs("div",{className:"lbo-entry-row lbo-entry-row-calculated",children:[e.jsx("span",{className:"lbo-entry-label",children:"Equity Value:"}),e.jsx("span",{className:"lbo-entry-value lbo-entry-value-calculated",children:_(k)})]})]}),e.jsxs("div",{className:"lbo-entry-form-column",children:[e.jsxs("div",{className:"lbo-entry-row",children:[e.jsx("span",{className:"lbo-entry-label",children:"Financing fees rate:"}),e.jsxs("label",{className:"lbo-entry-assumption-field",children:[e.jsx("input",{type:"number",step:"0.1",min:"0",value:m,onChange:n=>pt(n.target.value),className:"lbo-entry-assumption-input","aria-label":"Financing fees rate assumption"}),e.jsx("span",{className:"lbo-entry-assumption-suffix",children:"%"})]})]}),e.jsxs("div",{className:"lbo-entry-row",children:[e.jsx("span",{className:"lbo-entry-label",children:"Advisory fee:"}),e.jsxs("label",{className:"lbo-entry-assumption-field",children:[e.jsx("input",{type:"number",step:"0.1",min:"0",value:A,onChange:n=>vt(n.target.value),className:"lbo-entry-assumption-input","aria-label":"Advisory fee rate assumption"}),e.jsx("span",{className:"lbo-entry-assumption-suffix",children:"%"})]})]}),e.jsxs("div",{className:"lbo-entry-row",children:[e.jsx("span",{className:"lbo-entry-label",children:"Tax rate assumption:"}),e.jsxs("label",{className:"lbo-entry-assumption-field",children:[e.jsx("input",{type:"number",step:"0.1",min:"0",value:C,onChange:n=>yt(n.target.value),className:"lbo-entry-assumption-input","aria-label":"Tax rate assumption"}),e.jsx("span",{className:"lbo-entry-assumption-suffix",children:"%"})]})]}),e.jsxs("div",{className:"lbo-entry-row",children:[e.jsxs("label",{className:"lbo-entry-label",htmlFor:"lbo-entry-management-rollover-slider",children:["Management rollover:",e.jsx("span",{className:"lbo-entry-assumption-legend",children:" (% of management proceeds)"})]}),e.jsxs("div",{className:"lbo-entry-slider-control",children:[e.jsx("input",{id:"lbo-entry-management-rollover-slider",type:"range",min:Bt,max:Ot,step:kt,value:T,onChange:n=>O(n.target.value),className:"lbo-entry-slider","aria-label":"Management rollover percentage assumption"}),e.jsx("span",{className:"lbo-entry-slider-value",children:D(h)})]})]})]})]})}),e.jsxs("div",{className:"lbo-entry-sources-uses",children:[e.jsx("h3",{className:"lbo-entry-sources-uses-title",children:"Sources and Uses of Funds"}),e.jsxs("div",{className:"lbo-entry-sources-uses-grid",children:[e.jsxs("div",{className:"lbo-entry-sources-uses-section",children:[e.jsx("h4",{className:"lbo-entry-sources-uses-section-title",children:"Uses of Funds"}),e.jsxs("table",{className:"lbo-entry-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"lbo-entry-table-header-label"}),e.jsx("th",{className:"lbo-entry-table-header-value",children:"Amount"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-entry-table-label lbo-entry-table-label-expandable",children:Ne?e.jsxs("button",{type:"button",className:"lbo-entry-expand-button",onClick:dt,"aria-expanded":j,children:[e.jsx("span",{children:j?"−":"+"}),"Transaction equity value"]}):"Transaction equity value"}),e.jsx("td",{className:"lbo-entry-table-value",children:_(k)})]}),Ne&&j&&e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"lbo-entry-table-subrow",children:[e.jsx("td",{className:"lbo-entry-table-label",children:"Payment to management"}),e.jsx("td",{className:"lbo-entry-table-value",children:_(lt)})]}),e.jsxs("tr",{className:"lbo-entry-table-subrow",children:[e.jsx("td",{className:"lbo-entry-table-label",children:"Payment to 3i"}),e.jsx("td",{className:"lbo-entry-table-value",children:_(ot)})]}),e.jsxs("tr",{className:"lbo-entry-table-subrow",children:[e.jsx("td",{className:"lbo-entry-table-label",children:"Management rollover"}),e.jsx("td",{className:"lbo-entry-table-value",children:_(ct)})]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-entry-table-label",children:"Refinanced debt"}),e.jsx("td",{className:"lbo-entry-table-value",children:_(H)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-entry-table-label",children:"Advisory fees"}),e.jsx("td",{className:"lbo-entry-table-value",children:_(Q)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-entry-table-label",children:"Financing fees"}),e.jsx("td",{className:"lbo-entry-table-value",children:_(ee)})]}),e.jsxs("tr",{className:"lbo-entry-table-total",children:[e.jsx("td",{className:"lbo-entry-table-label",children:"Total uses of funds"}),e.jsx("td",{className:"lbo-entry-table-value",children:_(ae)})]})]})]})]}),e.jsxs("div",{className:"lbo-entry-sources-uses-section",children:[e.jsx("h4",{className:"lbo-entry-sources-uses-section-title",children:"Sources of Funds"}),e.jsxs("table",{className:"lbo-entry-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"lbo-entry-table-header-label"}),e.jsx("th",{className:"lbo-entry-table-header-value",children:"Amount"}),e.jsx("th",{className:"lbo-entry-table-header-value",children:"Int Rate"}),e.jsx("th",{className:"lbo-entry-table-header-value",children:"Cum Debt Mult"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-entry-table-label",children:"Senior debt (incl RCF)"}),e.jsx("td",{className:"lbo-entry-table-value",children:e.jsx("label",{className:"lbo-entry-assumption-field",children:e.jsx("input",{type:"number",step:"100",min:"0",value:i,onChange:n=>mt(n.target.value),className:"lbo-entry-assumption-input lbo-entry-table-input","aria-label":"Senior debt amount"})})}),e.jsx("td",{className:"lbo-entry-table-value",children:e.jsxs("label",{className:"lbo-entry-assumption-field",children:[e.jsx("input",{type:"number",step:"0.1",min:"0",value:x,onChange:n=>ht(n.target.value),className:"lbo-entry-assumption-input lbo-entry-table-input lbo-entry-table-rate-input","aria-label":"Senior debt interest rate"}),e.jsx("span",{className:"lbo-entry-assumption-suffix",children:"%"})]})}),e.jsx("td",{className:"lbo-entry-table-value",children:a(me)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-entry-table-label",children:"Subordinated debt"}),e.jsx("td",{className:"lbo-entry-table-value",children:e.jsx("label",{className:"lbo-entry-assumption-field",children:e.jsx("input",{type:"number",step:"100",min:"0",value:o,onChange:n=>bt(n.target.value),className:"lbo-entry-assumption-input lbo-entry-table-input","aria-label":"Subordinated debt amount"})})}),e.jsx("td",{className:"lbo-entry-table-value",children:e.jsxs("label",{className:"lbo-entry-assumption-field",children:[e.jsx("input",{type:"number",step:"0.1",min:"0",value:N,onChange:n=>xt(n.target.value),className:"lbo-entry-assumption-input lbo-entry-table-input lbo-entry-table-rate-input","aria-label":"Subordinated debt interest rate"}),e.jsx("span",{className:"lbo-entry-assumption-suffix",children:"%"})]})}),e.jsx("td",{className:"lbo-entry-table-value",children:a(be)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-entry-table-label",children:"Management rollover"}),e.jsx("td",{className:"lbo-entry-table-value lbo-entry-table-calculated",children:_(ie??se)}),e.jsx("td",{className:"lbo-entry-table-value",children:"-"}),e.jsx("td",{className:"lbo-entry-table-value",children:D(B)})]}),e.jsxs("tr",{children:[e.jsxs("td",{className:"lbo-entry-table-label",children:[P," equity (plug)"]}),e.jsx("td",{className:"lbo-entry-table-value lbo-entry-table-calculated",children:_(c)}),e.jsx("td",{className:"lbo-entry-table-value",children:"-"}),e.jsx("td",{className:"lbo-entry-table-value",children:D(K)})]}),e.jsxs("tr",{className:"lbo-entry-table-total",children:[e.jsx("td",{className:"lbo-entry-table-label",children:"Total sources of funds"}),e.jsx("td",{className:"lbo-entry-table-value",children:_(ue)}),e.jsx("td",{className:"lbo-entry-table-value",children:"-"}),e.jsx("td",{className:"lbo-entry-table-value",children:"-"})]})]})]})]})]}),e.jsxs("div",{className:"lbo-entry-pie-chart-container",children:[e.jsx("h4",{className:"lbo-entry-pie-chart-title",children:"Sources of Funds Distribution"}),e.jsx(ba,{data:{targetCash:void 0,seniorDebt:G,subordinatedDebt:L,managementRollover:ie??se??0,sponsorEquity:c??0},sponsorLabel:P})]})]}),e.jsxs("div",{className:"lbo-entry-equity-structure",children:[e.jsx("h3",{className:"lbo-entry-equity-structure-title",children:"Equity Structure"}),e.jsxs("div",{className:"lbo-entry-equity-structure-grid",children:[e.jsxs("div",{className:"lbo-entry-equity-card",children:[e.jsx("h4",{className:"lbo-entry-equity-card-title",children:"Pre-deal equity structure"}),e.jsx("p",{className:"lbo-entry-equity-card-subtitle",children:le.dateLabel}),e.jsxs("div",{className:"lbo-entry-equity-card-content",children:[e.jsx("div",{className:"lbo-entry-equity-card-table",children:e.jsxs("table",{className:"lbo-entry-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"lbo-entry-table-header-label"}),e.jsx("th",{className:"lbo-entry-table-header-value",children:"% ownership"}),e.jsx("th",{className:"lbo-entry-table-header-value",children:"Value"})]})}),e.jsxs("tbody",{children:[$?V.map(n=>e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-entry-table-label",children:n.name}),e.jsx("td",{className:"lbo-entry-table-value",children:D(n.ownershipPercent)}),e.jsx("td",{className:"lbo-entry-table-value",children:_(n.equityValue)})]},n.id??n.name)):e.jsx("tr",{children:e.jsx("td",{className:"lbo-entry-table-label",colSpan:3,children:"Configure shareholder values to display the pre-deal structure."})}),e.jsxs("tr",{className:"lbo-entry-table-total",children:[e.jsx("td",{className:"lbo-entry-table-label",children:"Total"}),e.jsx("td",{className:"lbo-entry-table-value",children:$?D(100):"-"}),e.jsx("td",{className:"lbo-entry-table-value",children:_(re)})]})]})]})}),e.jsxs("div",{className:"lbo-entry-equity-card-chart",children:[e.jsx("h5",{className:"lbo-entry-equity-card-chart-title",children:"Ownership distribution"}),e.jsx(Ce,{data:rt,width:260,height:260,minLabelPercentage:3,emptyStateMessage:"Configure shareholder values to display the pre-deal distribution."})]})]})]}),e.jsxs("div",{className:"lbo-entry-equity-card",children:[e.jsx("h4",{className:"lbo-entry-equity-card-title",children:"Post-deal equity structure"}),e.jsxs("div",{className:"lbo-entry-equity-card-content",children:[e.jsx("div",{className:"lbo-entry-equity-card-table",children:e.jsxs("table",{className:"lbo-entry-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"lbo-entry-table-header-label"}),e.jsx("th",{className:"lbo-entry-table-header-value",children:"% ownership"}),e.jsx("th",{className:"lbo-entry-table-header-value",children:"Value"})]})}),e.jsxs("tbody",{children:[Z.map(n=>e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-entry-table-label",children:n.name}),e.jsx("td",{className:"lbo-entry-table-value",children:Y?D(n.ownershipPercent):"-"}),e.jsx("td",{className:"lbo-entry-table-value",children:_(n.equityValue)})]},n.id??n.name)),e.jsxs("tr",{className:"lbo-entry-table-total",children:[e.jsx("td",{className:"lbo-entry-table-label",children:"Total"}),e.jsx("td",{className:"lbo-entry-table-value",children:Y?D(100):"-"}),e.jsx("td",{className:"lbo-entry-table-value",children:_(U)})]})]})]})}),e.jsxs("div",{className:"lbo-entry-equity-card-chart",children:[e.jsx("h5",{className:"lbo-entry-equity-card-chart-title",children:"Post-deal distribution"}),e.jsx(Ce,{data:it,width:260,height:260,minLabelPercentage:3,emptyStateMessage:"Set deal inputs to calculate the post-deal distribution."})]})]})]})]})]})]})}const xa=.25,qe=6,_e=t=>{if(t===void 0||Number.isNaN(t))return[];const i=[];for(let d=-qe;d<=qe;d+=1){const o=parseFloat((t+d*xa).toFixed(2));o>0&&i.push(o)}return i};function pa(){const{years:t}=je(),{seniorDebtInterestRate:i,subordinatedDebtInterestRate:d,entryMultiple:o,exitMultiple:l,setExitMultiple:x,selectedExitYear:y,setSelectedExitYear:N}=ce(),S=s.useMemo(()=>t.filter(a=>a.year>sa),[t]);s.useEffect(()=>{var X,Y;if(!S.length)return;const a=(X=S.find(Z=>Z.year===Ue))==null?void 0:X.year,D=(Y=S[0])==null?void 0:Y.year,O=a??D;if(!y){N(O?O.toString():"");return}S.some(Z=>Z.year.toString()===y)||N(O?O.toString():"")},[S,y,N]);const[g,E]=s.useState(!1),[C,f]=s.useState(!1),R=s.useMemo(()=>S.find(a=>a.year.toString()===y),[S,y]),v=s.useMemo(()=>{const a=parseInt(y,10);return Number.isNaN(a)?void 0:a},[y]),m=R==null?void 0:R.ebit,M=R==null?void 0:R.cashAtBankAndInHandOperating,A=s.useMemo(()=>t.find(a=>a.year===ne),[t]),u=A==null?void 0:A.ebit,T=s.useMemo(()=>t.find(a=>a.year===Ye),[t]),w=T==null?void 0:T.cashAtBankAndInHandOperating,j=s.useMemo(()=>{const a=parseFloat(l);return Number.isNaN(a)?void 0:a},[l]),F=s.useMemo(()=>{const a=parseFloat(o);return Number.isNaN(a)?void 0:a},[o]),I=s.useMemo(()=>_e(F),[F]),P=s.useMemo(()=>_e(j),[j]),q=s.useMemo(()=>{if(!(m===void 0||j===void 0))return m*j},[m,j]),h=s.useMemo(()=>{if(!(u===void 0||F===void 0))return u*F},[u,F]),r=s.useMemo(()=>{if(!(h===void 0||w===void 0))return h+w},[h,w]),b=s.useMemo(()=>{const a=v??ne;return t.filter(D=>D.year>=ne&&D.year<=a)},[t,v]),p=a=>a===void 0?"":a.toLocaleString("en-GB",{minimumFractionDigits:0,maximumFractionDigits:0}),k=a=>a===void 0?"-":`${a.toFixed(1)}x`,H=a=>a===void 0?"":`${a.toFixed(2)}x`,Q=a=>a===void 0?"":`${(a*100).toFixed(1)}%`,ee=a=>a===void 0?"":`${a.toFixed(1)} yrs`,ae=a=>`${a}`,G=a=>{const D=parseFloat(a);return Number.isNaN(D)?0:D},L=s.useMemo(()=>{const a=G(i),D=G(d);return tt(b,a,D)},[b,i,d]),U=s.useMemo(()=>{const a=new Map;return L.forEach(D=>a.set(D.year,D)),a},[L]),se=s.useMemo(()=>at(v,U,R),[v,U,R]),c=s.useMemo(()=>st(M,se),[M,se]),B=s.useMemo(()=>{if(!(q===void 0||c===void 0))return q+c},[q,c]),K=s.useMemo(()=>{if(!(B===void 0||r===void 0||r===0))return B/r},[B,r]),V=s.useMemo(()=>nt(v),[v]),z=s.useMemo(()=>{if(!(K===void 0||V===void 0))return Math.pow(K,1/V)-1},[K,V]),re=s.useMemo(()=>I.length===0||P.length===0||u===void 0||w===void 0||m===void 0||c===void 0||V===void 0||V<=0?[]:P.map(a=>{const D=m*a+c;return I.map(O=>{const $=u*O+w;if($<=0||D<=0)return;const X=D/$;if(!(X<=0))return Math.pow(X,1/V)-1})}),[I,P,u,w,m,c,V]),ie=s.useMemo(()=>I.length===0||P.length===0||u===void 0||w===void 0||m===void 0||c===void 0?[]:P.map(a=>{const D=m*a+c;return I.map(O=>{const $=u*O+w;if(!($<=0||D<=0))return D/$})}),[I,P,u,w,m,c]),ue=F!==void 0?F.toFixed(2):void 0,me=j!==void 0?j.toFixed(2):void 0,be=re.length>0,_=ie.length>0;return e.jsxs("div",{className:"lbo-entry-container",children:[e.jsx("h2",{className:"lbo-entry-title",children:"LBO Exit"}),e.jsx("div",{className:"lbo-entry-form",children:e.jsxs("div",{className:"lbo-entry-form-grid",children:[e.jsxs("div",{className:"lbo-entry-form-column exit-metrics-column",children:[e.jsxs("div",{className:"lbo-entry-row",children:[e.jsx("label",{className:"lbo-entry-label",htmlFor:"exit-transaction-date",children:"Transaction Date:"}),S.length>0?e.jsx("select",{id:"exit-transaction-date",className:"lbo-entry-select",value:y,onChange:a=>N(a.target.value),children:S.map(a=>e.jsx("option",{value:a.year.toString(),children:ae(a.year)},a.year))}):e.jsx("span",{className:"lbo-entry-value",children:"No exit years available"})]}),e.jsxs("div",{className:"lbo-entry-row",children:[e.jsx("span",{className:"lbo-entry-label",children:"Exit EBIT:"}),e.jsx("span",{className:"lbo-entry-value",children:p(m)})]}),e.jsxs("div",{className:"lbo-entry-row",children:[e.jsx("label",{className:"lbo-entry-label",htmlFor:"exit-multiple-slider",children:"Multiple:"}),e.jsxs("div",{className:"lbo-entry-slider-control",children:[e.jsx("input",{id:"exit-multiple-slider",type:"range",min:We,max:He,step:Ge,value:l,onChange:a=>x(a.target.value),className:"lbo-entry-slider","aria-label":"Assumed exit multiple for enterprise value calculation"}),e.jsx("span",{className:"lbo-entry-slider-value",children:k(j)})]})]}),e.jsxs("div",{className:"lbo-entry-row lbo-entry-row-calculated",children:[e.jsx("span",{className:"lbo-entry-label",children:"Enterprise Value (EV):"}),e.jsx("span",{className:"lbo-entry-value lbo-entry-value-calculated",children:p(q)})]}),e.jsxs("div",{className:"lbo-entry-row",children:[e.jsx("span",{className:"lbo-entry-label",children:"Net Cash (minus Debt):"}),e.jsx("span",{className:"lbo-entry-value lbo-entry-value-calculated",children:p(c)})]}),e.jsxs("div",{className:"lbo-entry-row lbo-entry-row-calculated",children:[e.jsx("span",{className:"lbo-entry-label",children:"Equity Value:"}),e.jsx("span",{className:"lbo-entry-value lbo-entry-value-calculated",children:p(B)})]})]}),e.jsxs("div",{className:"lbo-entry-form-column exit-comparison-column",children:[e.jsxs("div",{className:"lbo-entry-row lbo-entry-row-calculated",children:[e.jsx("span",{className:"lbo-entry-label",children:"Entry equity value:"}),e.jsx("span",{className:"lbo-entry-value lbo-entry-value-calculated",children:p(r)})]}),e.jsxs("div",{className:"lbo-entry-row",children:[e.jsx("span",{className:"lbo-entry-label",children:"Entry multiple:"}),e.jsx("span",{className:"lbo-entry-value",children:k(F)})]}),e.jsxs("div",{className:"lbo-entry-row lbo-entry-row-calculated",children:[e.jsx("span",{className:"lbo-entry-label",children:"Exit equity value:"}),e.jsx("span",{className:"lbo-entry-value lbo-entry-value-calculated",children:p(B)})]}),e.jsxs("div",{className:"lbo-entry-row",children:[e.jsx("span",{className:"lbo-entry-label",children:"Exit multiple:"}),e.jsx("span",{className:"lbo-entry-value",children:k(j)})]}),e.jsxs("div",{className:"lbo-entry-row",children:[e.jsx("span",{className:"lbo-entry-label",children:"Holding period:"}),e.jsx("span",{className:"lbo-entry-value",children:ee(V)})]}),e.jsxs("div",{className:"lbo-entry-row lbo-entry-row-calculated",children:[e.jsx("span",{className:"lbo-entry-label",children:"MOIC:"}),e.jsx("span",{className:"lbo-entry-value lbo-entry-value-calculated",children:H(K)}),_&&e.jsx("button",{type:"button",className:"exit-sensitivity-link",onClick:()=>f(!0),"aria-label":"Open MOIC sensitivity matrix",children:"Sensitivity"})]}),e.jsxs("div",{className:"lbo-entry-row lbo-entry-row-calculated exit-irr-row",children:[e.jsx("span",{className:"lbo-entry-label",children:"IRR:"}),e.jsx("span",{className:"lbo-entry-value lbo-entry-value-calculated",children:Q(z)}),be&&e.jsx("button",{type:"button",className:"exit-sensitivity-link",onClick:()=>E(!0),"aria-label":"Open IRR sensitivity matrix",children:"Sensitivity"})]})]})]})}),C&&_&&e.jsx("div",{className:"exit-sensitivity-overlay",role:"dialog","aria-modal":"true","aria-label":"MOIC sensitivity table",onClick:()=>f(!1),children:e.jsxs("div",{className:"exit-sensitivity-overlay-content",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"exit-sensitivity-overlay-header",children:[e.jsx("h3",{className:"exit-sensitivity-title",children:"MOIC Sensitivity (Entry vs Exit Multiple)"}),e.jsx("button",{type:"button",className:"exit-sensitivity-close",onClick:()=>f(!1),"aria-label":"Close sensitivity table",children:"×"})]}),e.jsx("div",{className:"exit-sensitivity-table-wrapper",children:e.jsxs("table",{className:"exit-sensitivity-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"exit-sensitivity-corner-cell",children:"Exit \\ Entry"}),I.map(a=>e.jsxs("th",{className:"exit-sensitivity-header-cell",children:[a.toFixed(2),"x"]},`moic-entry-multiple-${a}`))]})}),e.jsx("tbody",{children:P.map((a,D)=>{var O;return e.jsxs("tr",{children:[e.jsxs("th",{className:"exit-sensitivity-header-cell",children:[a.toFixed(2),"x"]}),(O=ie[D])==null?void 0:O.map(($,X)=>{const Y=I[X],Z=ue===Y.toFixed(2)&&me===a.toFixed(2);return e.jsx("td",{className:`exit-sensitivity-cell${Z?" exit-sensitivity-cell-selected":""}`,children:$===void 0?"—":H($)},`moic-cell-${a}-${Y}`)})]},`moic-exit-multiple-row-${a}`)})})]})})]})}),g&&be&&e.jsx("div",{className:"exit-sensitivity-overlay",role:"dialog","aria-modal":"true","aria-label":"IRR sensitivity table",onClick:()=>E(!1),children:e.jsxs("div",{className:"exit-sensitivity-overlay-content",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"exit-sensitivity-overlay-header",children:[e.jsx("h3",{className:"exit-sensitivity-title",children:"IRR Sensitivity (Entry vs Exit Multiple)"}),e.jsx("button",{type:"button",className:"exit-sensitivity-close",onClick:()=>E(!1),"aria-label":"Close sensitivity table",children:"×"})]}),e.jsx("div",{className:"exit-sensitivity-table-wrapper",children:e.jsxs("table",{className:"exit-sensitivity-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"exit-sensitivity-corner-cell",children:"Exit \\ Entry"}),I.map(a=>e.jsxs("th",{className:"exit-sensitivity-header-cell",children:[a.toFixed(2),"x"]},`irr-entry-multiple-${a}`))]})}),e.jsx("tbody",{children:P.map((a,D)=>{var O;return e.jsxs("tr",{children:[e.jsxs("th",{className:"exit-sensitivity-header-cell",children:[a.toFixed(2),"x"]}),(O=re[D])==null?void 0:O.map(($,X)=>{const Y=I[X],Z=ue===Y.toFixed(2)&&me===a.toFixed(2);return e.jsx("td",{className:`exit-sensitivity-cell${Z?" exit-sensitivity-cell-selected":""}`,children:$===void 0?"—":Q($)},`irr-cell-${a}-${Y}`)})]},`irr-exit-multiple-row-${a}`)})})]})})]})}),e.jsxs("div",{className:"lbo-exit-performance-section",children:[e.jsx("h3",{className:"lbo-exit-performance-title",children:"Entry to Exit Performance"}),b.length>0?e.jsxs("table",{className:"lbo-exit-performance-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"lbo-exit-performance-header",children:"Metric"}),b.map(a=>e.jsx("th",{className:"lbo-exit-performance-header",children:a.year},a.year))]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"Sales"}),b.map(a=>e.jsx("td",{className:"lbo-exit-performance-value",children:p(a.turnover)},`sales-${a.year}`))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"EBITDA"}),b.map(a=>e.jsx("td",{className:"lbo-exit-performance-value",children:p(a.ebitda)},`ebitda-${a.year}`))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"Interest on primary debt"}),b.map(a=>{var D,O;return e.jsx("td",{className:"lbo-exit-performance-value",children:p(((D=U.get(a.year))==null?void 0:D.senior.interestExpense)??((O=a.primaryDebt)==null?void 0:O.interest))},`primary-interest-${a.year}`)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"Interest on secondary debt"}),b.map(a=>{var D,O;return e.jsx("td",{className:"lbo-exit-performance-value",children:p(((D=U.get(a.year))==null?void 0:D.subordinated.interestExpense)??((O=a.secondaryDebt)==null?void 0:O.interest))},`secondary-interest-${a.year}`)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"Profit before tax"}),b.map(a=>e.jsx("td",{className:"lbo-exit-performance-value",children:p(a.pbt)},`pbt-${a.year}`))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"Tax expense"}),b.map(a=>e.jsx("td",{className:"lbo-exit-performance-value",children:p(a.taxExpense)},`tax-${a.year}`))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"Net income"}),b.map(a=>e.jsx("td",{className:"lbo-exit-performance-value",children:p(a.netIncome)},`net-income-${a.year}`))]})]})]}):e.jsx("p",{className:"lbo-exit-performance-empty",children:"Set an exit year to view the performance snapshot."})]}),e.jsxs("div",{className:"lbo-exit-performance-section",children:[e.jsx("h3",{className:"lbo-exit-performance-title",children:"Cash Flow Estimation"}),b.length>0?e.jsxs("table",{className:"lbo-exit-performance-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"lbo-exit-performance-header",children:"Metric"}),b.map(a=>e.jsx("th",{className:"lbo-exit-performance-header",children:a.year},`cashflow-head-${a.year}`))]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"EBITDA"}),b.map(a=>e.jsx("td",{className:"lbo-exit-performance-value",children:p(a.ebitda)},`cf-ebitda-${a.year}`))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"Tax expense (cash taxes)"}),b.map(a=>e.jsx("td",{className:"lbo-exit-performance-value",children:p(a.taxExpense)},`cf-tax-${a.year}`))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"Changes in net working capital"}),b.map(a=>e.jsx("td",{className:"lbo-exit-performance-value",children:p(Je(a))},`cf-nwc-${a.year}`))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"Change in other long-term liabilities"}),b.map(a=>e.jsx("td",{className:"lbo-exit-performance-value",children:p(Ze(a))},`cf-ltl-${a.year}`))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"Capex"}),b.map(a=>e.jsx("td",{className:"lbo-exit-performance-value",children:p(a.netCapitalExpenditure)},`cf-capex-${a.year}`))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"Interest on senior debt"}),b.map(a=>{var D,O;return e.jsx("td",{className:"lbo-exit-performance-value",children:p(((D=U.get(a.year))==null?void 0:D.senior.interestExpense)??((O=a.primaryDebt)==null?void 0:O.interest))},`cf-senior-${a.year}`)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"Interest on subordinated debt"}),b.map(a=>{var D,O;return e.jsx("td",{className:"lbo-exit-performance-value",children:p(((D=U.get(a.year))==null?void 0:D.subordinated.interestExpense)??((O=a.secondaryDebt)==null?void 0:O.interest))},`cf-sub-${a.year}`)})]}),e.jsxs("tr",{className:"lbo-exit-performance-row-total",children:[e.jsx("td",{className:"lbo-exit-performance-label lbo-exit-performance-label-strong",children:"Cash flow available for debt repayment"}),b.map(a=>{var $,X;const D=U.get(a.year),O=Math.max(et(a)-((($=a.primaryDebt)==null?void 0:$.interest)??0)-(((X=a.secondaryDebt)==null?void 0:X.interest)??0),0);return e.jsx("td",{className:"lbo-exit-performance-value lbo-exit-performance-value-strong",children:p((D==null?void 0:D.cashFlowAvailableForDebtRepayment)??O)},`cf-available-${a.year}`)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"Repayment of senior debt"}),L.map(a=>e.jsx("td",{className:"lbo-exit-performance-value",children:p(a.senior.repayment)},`cf-senior-repayment-${a.year}`))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"Repayment of subordinated debt"}),L.map(a=>e.jsx("td",{className:"lbo-exit-performance-value",children:p(a.subordinated.repayment)},`cf-subordinated-repayment-${a.year}`))]})]})]}):e.jsx("p",{className:"lbo-exit-performance-empty",children:"Set an exit year to view the cash flow estimation."})]}),e.jsxs("div",{className:"lbo-exit-performance-section",children:[e.jsx("h3",{className:"lbo-exit-performance-title",children:"Debt schedule"}),b.length>0?e.jsxs("table",{className:"lbo-exit-performance-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"lbo-exit-performance-header",children:"Metric"}),L.map(a=>e.jsx("th",{className:"lbo-exit-performance-header",children:a.year},`debt-head-${a.year}`))]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"Senior debt - beginning balance"}),L.map(a=>e.jsx("td",{className:"lbo-exit-performance-value",children:p(a.senior.startingBalance)},`senior-begin-${a.year}`))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"Senior debt - interest expense"}),L.map(a=>e.jsx("td",{className:"lbo-exit-performance-value",children:p(a.senior.interestExpense)},`senior-interest-${a.year}`))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"Senior debt - repayment"}),L.map(a=>e.jsx("td",{className:"lbo-exit-performance-value",children:p(a.senior.repayment)},`senior-repayment-${a.year}`))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"Senior debt - ending balance"}),L.map(a=>e.jsx("td",{className:"lbo-exit-performance-value",children:p(a.senior.endingBalance)},`senior-ending-${a.year}`))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"Subordinated debt - beginning balance"}),L.map(a=>e.jsx("td",{className:"lbo-exit-performance-value",children:p(a.subordinated.startingBalance)},`sub-begin-${a.year}`))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"Subordinated debt - interest expense"}),L.map(a=>e.jsx("td",{className:"lbo-exit-performance-value",children:p(a.subordinated.interestExpense)},`sub-interest-${a.year}`))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"Subordinated debt - repayment"}),L.map(a=>e.jsx("td",{className:"lbo-exit-performance-value",children:p(a.subordinated.repayment)},`sub-repayment-${a.year}`))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label",children:"Subordinated debt - ending balance"}),L.map(a=>e.jsx("td",{className:"lbo-exit-performance-value",children:p(a.subordinated.endingBalance)},`sub-ending-${a.year}`))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"lbo-exit-performance-label lbo-exit-performance-label-strong",children:"Total debt"}),L.map(a=>e.jsx("td",{className:"lbo-exit-performance-value lbo-exit-performance-value-strong",children:p(a.senior.endingBalance+a.subordinated.endingBalance)},`total-debt-${a.year}`))]})]})]}):e.jsx("p",{className:"lbo-exit-performance-empty",children:"Set an exit year to view the debt schedule."})]})]})}function va(){return e.jsx(Lt,{children:e.jsx("div",{className:"app",children:e.jsxs("div",{className:"container",children:[e.jsx("h1",{children:"Styles & Wood – Behind the Scenes of Retail"}),e.jsxs(Et,{children:[e.jsx(ve,{tab:"info",children:e.jsx(ia,{})}),e.jsx(ve,{tab:"operational",children:e.jsx(ca,{})}),e.jsx(ve,{tab:"lbo_entry",children:e.jsx(ha,{})}),e.jsx(ve,{tab:"exit",children:e.jsx(pa,{})})]}),e.jsxs("div",{className:"case-reference",children:[e.jsx("p",{children:'Case Study: "Styles & Wood – Behind the Scenes of Retail"'}),e.jsx("p",{children:"Prepared by Alberto Pons, Kay Nemoto, Eli Talmor"}),e.jsxs("p",{children:[e.jsx("a",{href:"index.html",style:{color:"#000",textDecoration:"none",marginRight:"16px"},children:"← Back to Main"}),"Vibe-coded by ",e.jsx("a",{href:"https://www.linkedin.com/in/dima-malyshenko/",target:"_blank",rel:"noopener noreferrer",style:{color:"#000",textDecoration:"none"},children:"Dima Malyshenko"})]})]})]})})})}Nt.createRoot(document.getElementById("root")).render(e.jsx(gt.StrictMode,{children:e.jsx(va,{})}));
